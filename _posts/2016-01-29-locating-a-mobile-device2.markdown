---

title: Locating a mobile device
abstract: Identifying a location of a mobile device is disclosed (e.g., presuming user consent to the same). One or more received signal strengths (RSSs), comprising a first RSS, may be received by a first access point (AP) from the mobile device. The RSSs may be used to identify a grid area, comprising a first grid space. A signal distance between the first grid space and the first AP may be identified using the first RSS, and combined with a first grid space distance, comprising a known distance between the first grid space and the first AP, to determine a first grid space likelihood score for the first grid space. A second grid space likelihood score may be determined for a second grid space (e.g., and a third, etc.), and the grid space comprising a desired grid space likelihood score (e.g., highest) may be selected as the mobile device location.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09588217&OS=09588217&RS=09588217
owner: Microsoft Technology Licensing, LLC
number: 09588217
owner_city: Redmond
owner_country: US
publication_date: 20160129
---
This application is a continuation of U.S. patent application Ser. No. 13 431 497 filed Mar. 27 2012 entitled Locating a Mobile Device which is incorporated herein by reference.

Many computing devices are portable and many mobile devices may be interactive with a user s surroundings. For example a mapping application running on a user s mobile device e.g. smartphone may allow the user to identify their approximate location on a map displayed on the mobile device. Further points of interest retails establishments entertainment venues and more can be indicated on such a map for example which can be searched for and or identified as the user moves through an area. Typically mobile devices use global positioning systems GPS which utilize satellite triangulation or some sort of signal triangulation e.g. mobile phone signal to identify the approximate location of the user. This location information can be used by various applications on the user s device e.g. with the user s consent such as to locate the user on a map provide appropriate and relevant local information identify the user s location for social networking interact with local devices services and or to provide a rich interactive experience for the user.

This Summary is provided to introduce a selection of concepts in a simplified form that are further described below in the Detailed Description. This Summary is not intended to identify key factors or essential features of the claimed subject matter nor is it intended to be used to limit the scope of the claimed subject matter.

Current global positioning systems GPS and or other location identification services used on mobile devices may not provide needed fidelity for some user experiences such as applications running on the mobile device and or information provided to mobile device data providers. For example while the GPS can provide a relative position of the user to a mapped point GPS type location tracking loses reliability when a mobile device is inside a building or under cover e.g. parking garage . Even in optimal conditions a GPS may not be able tell that the user is inside a particular building standing in front of a particular display in a store etc. Further as an example an approximate position of a user provided via mobile signal triangulation may not meet granularity requirements to sufficiently locate the user such as for identifying a location of the user from several potential overlapping locations.

Other current or previous wireless technologies for mobile device location may utilize respective signal strengths detected by the mobile device from one or more wireless access points APs . However these technologies need to do extensive site surveys to collect radio signatures which may quickly become unusable if the indoor environment changes e.g. due to renovation and or AP location change . Further these technologies typically rely on an ideal path loss model which is very difficult to properly utilize in an indoor environment. Additionally these types of technologies are not typically scalable in a manner that allows the device location to be determined efficiently in a cloud based environment.

Accordingly among other things one or more techniques and or systems are disclosed for locating a mobile device for example where GPS and or mobile signal triangulation may not be sufficient e.g. indoors and or where a more accurate position is desired and where site surveys may not be necessary. Local known access points such as wireless access points used for network access e.g. WiFi may be utilized to more accurately identify a location of a user s mobile device. For example a signal strength received by one or more APs in an area from the mobile device can be used to identify an estimated distance between the respective one or more APs and the mobile device. Further in this example the estimated distance s may be compared with a known distance between the access point s and respective grid spaces comprised in a gird overlaying an area to determine a grid space likelihood score. A particular grid space that comprises a desired e.g. indicating most likely grid space likelihood score may be selected as the location of the mobile device.

In one embodiment of identifying a location of a mobile device a first signal distance between a first grid space and a first access point AP can be determined using a first received signal strength RSS . The first RSS may comprise an indication of mobile device signal strength received by the first AP. Further a first grid space likelihood score for the first grid space can be determined by comparing the first signal distance with a first grid space distance. The first grid space distance may comprise a known distance between the first AP and the first grid space. Additionally the mobile device location can be identified based at least on the first grid space likelihood score.

To the accomplishment of the foregoing and related ends the following description and annexed drawings set forth certain illustrative aspects and implementations. These are indicative of but a few of the various ways in which one or more aspects may be employed. Other aspects advantages and novel features of the disclosure will become apparent from the following detailed description when considered in conjunction with the annexed drawings.

The claimed subject matter is now described with reference to the drawings wherein like reference numerals are generally used to refer to like elements throughout. In the following description for purposes of explanation numerous specific details are set forth in order to provide a thorough understanding of the claimed subject matter. It may be evident however that the claimed subject matter may be practiced without these specific details. In other instances structures and devices are shown in block diagram form in order to facilitate describing the claimed subject matter.

As provided herein a method may be devised that provides for locating a mobile device such as inside a building. Whereas global positioning systems GPSs tend to stop working properly indoors one or more local wireless transmission sites e.g. wireless access points WAPs may be used to provide an accurate reliable location of the mobile device. Further a location service may be able to remotely e.g. cloud based identify the mobile device using signals received from the mobile device by the one or more wireless transmission sites e.g. provided a user consents to the same . An area such as a floor of a building may be broken down into a grid based on a location on the one or more APs where a distance between respective grid spaces e.g. squares and respective one or more wireless transmission sites is known. Received signal strengths RSSs of received transmissions can be used in combination with the known distances for example to identify where the mobile device is located in the area.

As another example a RSS may be used to identify an estimated distance between a receiver of the RSS and a transmitter of the RSS. In one embodiment the transmitter of the first RSS can comprise the mobile device and the receiver of the first RSS can comprise the first AP e.g. and a second AP third AP etc. . For example the first RSS comprising an indication of signal strength from the mobile device may have been received by the first AP and used to determine the first signal distance by estimating the distance between the transmitter e.g. the mobile device and the receiver e.g. the first AP . In one embodiment the mobile device may periodically e.g. or continuously or on demand etc. transmit data packets which can be detected and received by one or more APs within reception range.

Further as one example a location of the mobile device may be unknown when determining the signal distance. In this example the first grid space square may be used as a potential location of the mobile device e.g. at a time of data packet transmission and the first signal distance can comprise the estimated distance e.g. determined using the first RSS between the first grid space and the first AP as if the mobile device was located in the first grid space.

At in the exemplary method a first grid space likelihood score is determined for the first grid space by comparing the first signal distance and a first grid space distance. The first grid space distance comprises a known distance between the first AP and the first grid space. As one example a location of the respective grid spaces in a grid such as overlaying an area e.g. a floor of a building can be known. Further for example a location of the first AP e.g. and other APs if present may be known. In this way a distance between the first grid space and the first AP may also be known comprising the first grid space distance.

In one embodiment the first grid space likelihood score may be determined by combining the first signal distance and a first grid space distance using a grid space scoring formula. As one example a difference between the first signal distance and a first grid space distance can be calculated e.g. normalizing a result of subtracting the signal distance from the grid space distance and the distance difference may be used as an input to the grid space scoring formula. In this example the result of the inputting the distance difference may comprise a likelihood value e.g. a percentage absolute value etc. indicating a likelihood that the mobile device is located in the corresponding grid square e.g. the first grid square .

At in the exemplary method the mobile device location may be identified based at least on the first grid space likelihood score. As one example if a grid space likelihood score represents a likelihood that the mobile device is located in the corresponding grid space the grid space comprising a highest e.g. highest percentage of likelihood grid score may be selected as most likely to comprise the location of the mobile device. For example a grid space likelihood score may be determined for respective sixty grid spaces comprised in a grid e.g. a six by ten grid overlaying an area e.g. a floor of a building . In this example the grid space of the sixty spaces that comprises a desired grid score e.g. highest may be selected as the location of the mobile device.

As one example the mobile device may periodically transmit a data packet e.g. the first data packet a second data packet etc. such as for device location purposes for mobile data updates and or to connect with a local wireless access point e.g. on demand such as when a user of the mobile device wishes to get a current location for example . In this example the one or more APs within reception range can receive the transmitted data packets from the mobile device. As another example a plurality of mobile devices may be periodically transmitting data packets in an area e.g. on demand to get a current location for example which may respectively be received by respective local APs e.g. the first AP a second AP etc. in the reception area.

At in the example embodiment a mobile device signal report may be created where the signal report can comprise a received signal strength RSS for the signal comprising the data packet and optionally a time stamp indicating a time of reception of the signal. As one example the AP e.g. first AP may determine the RSS e.g. first RSS based on an indication of signal strength of the received signal e.g. decibels per milliwatt dBmW recorded by the AP at time of reception . Further as one example the AP may record a time of signal reception and create a time stamp corresponding the RSS.

Additionally in one embodiment the data packet may comprise a data packet identifier ID e.g. a thirty two bit number that is incremented and assigned to respective new data packets transmitted by the mobile device . In this embodiment for example the report may comprise the data packet ID e.g. in lieu of or as well as the time stamp for the data packet comprised in the signal. For example a time stamp may be used to identify a particular time for the RSS and a data packet ID may be able to identify a more recent RSS e.g. based on the incremented number where a larger number may indicate a more recent RSS .

In one embodiment the mobile device signal report may comprise a mobile device ID for example which can specifically identify the mobile device that sent the signal. Further the mobile device signal report may comprise transmission power data that indicates a transmission power of the mobile device e.g. a transmission strength in dBmW e.g. which may be obtained from a data packet sent from the mobile device a mobile device type e.g. a device platform operating system applications etc. an AP identifier ID that particularly identifies the AP receiving the signal and or a location e.g. coordinates building address and floor location in building etc. of the AP that received the signal.

At in the example embodiment the mobile device signal report can be sent to a device location service. As one example the device location service may comprise a remote e.g. cloud based service that can be used to identify the location of the mobile device . At the device location service may receive the report and filter data in the report. As one example one or more reports sent from an unknown AP may be filtered e.g. screening out RSS data that corresponds to an unknown AP . As one example if an AP is unidentified e.g. no corresponding AP ID a location of the unidentified AP may also be unknown e.g. which may prevent determining a known distance . Further if no AP location data is provided a location of the AP may also be unknown also justifying discarding filtering corresponding RSS data. By way of example an unknown AP may correspond to an AP for which an AP ID is not linked to or listed in known AP data and or an AP for which an AP location is unavailable in known AP data . It may be appreciated that one or more AP databases may comprise known AP data which may be used to screen out the mobile device report s from one or more unknown APs.

At the device location service may populate the information in the mobile device signal report to an indexed database . As on example the database may store mobile device observation records. For example a mobile device observation record may comprise information indicating a particular AP that received a particular signal from a particular mobile device at a particular strength at a particular point in time etc. A mobile device observation record may comprise for example a mobile device ID a packet ID a timestamp a RSS a transmission power an AP ID an AP location and or device type etc.

As one example at a mobile device observation record comprising the RSS may be indexed to the mobile device ID such that the mobile observation record e.g. and the RSS may be identified by the mobile device ID. At the mobile device observation record e.g. comprising the RSS can be indexed to the packet ID such that the mobile device observation record e.g. and the RSS may be identified by the packet ID e.g. selecting a most recent RSS and or the mobile device ID. At the mobile device observation record e.g. comprising the RSS may be indexed by the time stamp such that the mobile device observation record e.g. and the RSS may be identified by the time stamp e.g. select RSS between time A and time B the packet ID and or the mobile device ID. At the mobile device type may be indexed to the mobile device ID such that the mobile device type may be identified by the mobile device ID. It will be appreciated however that these are merely a few indexing options and that the instant application including the scope if the appended claims is not intended to be so limited e.g. fewer or more indexing criteria are contemplated .

As one example the data comprised in the mobile device signal report may be populated and indexed in the indexed database . Further returning to the mobile device may transmit another signal comprising another data packet e.g. a second signal comprising a second data packet which may be received by the one or more APs at . Further a second report may be created and sent to the device location service where the mobile device signal information may populated e.g. updated into the indexed database . The flow loop to may iterate for example at least until the mobile device is out of reception range of the APs and or no mobile devices are within reception range of the APs for example.

In one embodiment the location query may comprise a mobile device ID that is particular to merely one mobile device and a desired time period for the device location e.g. where was device X at time Y . As one example the location request may comprise a request to identify a most recent location of the particular mobile device. As another example the location request may ask to identify the device location during a time period between time A and time B e.g. between now and the next few seconds as longer periods may produce undesired results when devices are moving .

At the mobile device ID and desired time period from the location query may be used to retrieve indexed query data from an indexed database e.g. of . At one or more RSSs from the mobile device during the desired time period may be identified using the mobile device ID and desired time period. Further at an AP ID for the AP that reported the RSS for the respective one or more RSSs may also be identified. Using the AP ID a location of the AP may be identified in the indexed database at .

At a desired grid layout for an area comprising the mobile device may be identified using the indexed query data . In one embodiment the desired grid layout can comprise a physical area that comprises the first grid space e.g. and second grid space and third etc. at a known location and the location of the mobile device e.g. although unknown . At identifying the desired grid layout for the area can comprise ranking and or aggregating the one or more identified APs to select a building. As one example the AP location identified for the one or more APs can be used to aggregate or rank the APs in a particular building. For example the APs may be ranked based on a distance away from an aggregation center e.g. using AP density to create the aggregation center . As one example a first AP in the ranking may comprise a closest location to the aggregation center a second RSS e.g. next in the ranking may comprise a next closest AP location and so on.

In one embodiment a top K AP locations e.g. where K indicates a number of desired APs used may be selected from the ranking for subsequent filtering e.g. if desired . In one embodiment merely those AP locations that meet a desired AP distance threshold e.g. within a desired distance from the aggregation center may be selected for further processing. As one example the one or more AP locations selected may be associated with APs that are located in a building in which the mobile device may reside. That is for example merely those APs that are close enough may be selected as likely to be located in the same building as the mobile device e.g. filtering out APs in other buildings and or outside .

At in the example embodiment identifying the desired grid layout can comprise aggregating ranking the APs to select a floor location e.g. or a portion thereof in the selected building for the mobile device. As one example the one or more AP locations selected for the building may be further aggregated and subsequently ranked to select a particular floor e.g. or portion thereof in the building e.g. based on a top K AP locations and or an distance threshold indicative of the floor locality .

At in the example embodiment having selected a candidate area e.g. floor or portion thereof that potentially comprises the location of the mobile device a grid can be created resulting in grid data for the candidate area which may be used to overlay the selected candidate area. As one example the candidate area may be selected based at least on the ranked and selected AP locations respectively corresponding to one or more APs e.g. located in the candidate area which have been filtered by building and or by floor. In this example the grid can be created to comprise the selected candidate area where the grid may comprise a location of the mobile device.

Further the created grid can comprise one or more grid spaces for example respectively corresponding to a grid coordinate and therefore a known location relative to the candidate area. As an illustrative example illustrates an example embodiment where one or more portions of one or more techniques described herein may be implemented. In the example embodiment a grid comprises column coordinates and row coordinates respectively corresponding to a grid space such as first grid space . As one example the grid may correspond to e.g. in size and shape the candidate area such as a selected floor of a selected building. In this example the first grid space e.g. as well as other grid spaces in the grid can correspond to a known location in the candidate area.

In one embodiment the query data may be filtered to generate grid query data. In this embodiment for example the grid query data may comprise the IDs of the one or more APs that are identified in the candidate area. In this manner IDs of extraneous APs that are not within the candidate area may be removed. It may be appreciated that this can lead to more efficient processing as fewer calculations operations etc. may need to be performed as extraneous APs may not be considered.

At a next unprocessed grid space e.g. the first grid space from the grid data may be selected. As one example respective grid spaces in the grid e.g. of may be processed to identify a grid score for the respective grid spaces starting with the first grid space e.g. of . For example processing a next grid space may comprise selecting a grid space from the grid for which no grid score has been determined.

At a next unprocessed AP can be selected for processing for the selected grid space. As an illustrative example in the selected candidate area e.g. comprising the grid may comprise a plurality of APs A E . In this example for the first grid space the respective APs may be processed e.g. starting with a first AP A to determine the grid score for the first grid space .

Returning to at a first known distance between the first grid space and the first AP can be identified resulting in the first grid space distance. As an illustrative example in a location of the first AP A may be known from indexed query data e.g. of e.g. potentially comprising grid query data that excludes extraneous APs linking the AP ID to the AP location and the location of the first grid space is known e.g. based on the grid data of . Therefore in this example the first grid space distance A can be determined based on the known location of the first AP A and the known location of the first grid space e.g. from a center of the first grid space .

Returning to at a first signal distance e.g. estimated distance between the first grid space and the first AP can be determined using a function of RSS applied to a first RSS. Here the first RSS can be comprised in the indexed query data e.g. potentially comprising grid query data received from the mobile device signal report e.g. at of . The first RSS may be indicative of a strength of a signal sent from the mobile device and received by the first AP e.g. A of . In one embodiment the function of RSS applied to a first RSS may comprise a base path loss function. A path loss function for example may be indicative of a relationship between power density for a signal as distance between the transmitter and receiver increases given a same transmission power used by respective transmitters e.g. as a signal s electromagnetic wave propagates over a greater distance of space the power density may decrease .

In one embodiment when respective transmitters may not be using a same transmission power a function of signal attenuation e.g. instead of RSS can be applied to a first signal attenuation for example computed from transmission power of the mobile device and the first RSS. The function of signal attenuation applied to the first signal attenuation may for example comprise a base path loss function which may be indicative of a relationship between power attenuation for a signal as distance between the transmitter and receiver increases. The transmission power of the mobile device may for example be embedded in a data packet sent from the mobile device and received by one or more surrounding APs e.g. within reception distance . As another example the transmission power may be determined by a query to a database that stores respective transmission powers used by one or more different types of mobile devices.

In one embodiment where a path loss theory model may be used to develop the path loss function an ideal relationship between received signal strength and distance may not be necessary. As one example one or more wireless access points e.g. IEEE 802.11 APs and or other wireless technologies may be distributed around a given mobile device and the path loss function may be applied to accumulated statistical information e.g. a plurality of RSSs respectively received by different APs for inferring a mobile device s indoor location. In this embodiment for example applying the path loss function to the first RSS may result in the first signal distance between the first grid space and the first AP.

At in the example embodiment a first AP score for the first grid space can be determined using a first grid space distance e.g. a known distance between the first AP and the first grid space and the first signal distance. As one example a scoring function may be used to generate the first AP score for the first grid space such as by using the first grid space distance and the first signal distance as input to the scoring function resulting in an output comprising the first AP score for the first grid space. For example the scoring function may identify a difference between the first grid space distance and the first signal distance and or may apply a score weighting factor based on the RSS for the mobile device received by the first AP.

At the first AP score for the first grid space may be combined with the grid score for the first grid space. As one example a grid space likelihood score for the first grid space may be initially set to zero e.g. as the first AP is the first one processed to generate an AP score for the first grid space and the first AP score can be combined with zero e.g. summed with to generate the grid space likelihood score for the first grid space e.g. at least a first grid score for the first grid space .

At if another unprocessed AP is indicated for the first grid space a second AP may be processed for the first grid space at . In one embodiment at a second grid space distance may be identified between a second AP and the first grid space based at least on the indexed query data e.g. comprising the known location of the second AP and the grid data e.g. comprising the known location of the first grid space . Further at a second signal distance can be determined between the first grid space and the second AP using a second RSS. The second RSS can comprise an indication of signal strength for a signal transmitted from the mobile device and received by the second AP. As one example the base path loss function may be applied to the second RSS to determine the second signal distance.

At a second AP score can be determined for the first grid space using a combination of the second grid space distance and the second signal distance. As one example the scoring function may be used to determine the second AP score where the second grid space distance and the second signal distance e.g. and the second RSS comprise the inputs and the second AP score for the first grid space comprises the output. At the second AP score for the first grid space can be combined with the present or existing score for the first grid space or the first grid space grid score e.g. comprising at least the first AP score resulting in an updated first grid space grid space likelihood score e.g. comprising a combination of the first AP score and the second AP score .

As one example in the example embodiment the procedural loop of to may be iterated at least until respective APs have been processed for the first grid space. That is for example respective APs that are identified as corresponding to the aggregated and ranked AP locations e.g. as described in in the candidate area may be processed for the first grid space. As an illustrative example in five APs A E are identified as comprised within the candidate area e.g. floor of a selected building comprising the grid . In this example an AP score may be determined for the respective APs based at least upon their respective grid space distances A E and signal distances determined by an associated RSS e.g. received by the AP from the mobile device . The respective AP scores can be combined to determine the grid space likelihood score for the first grid space .

Returning to at if a next unprocessed grid space is present a second grid space may be processed at . As one example the procedural loop of to may be iterated at least until respective APs e.g. comprising the same APs as were processed for the first grid space have been processed for the second grid space. Further the respective AP scores can be combined at to determine the grid space likelihood score for the second grid space. Additionally the procedural loop of to may be iterated at least until respective grid spaces in the grid have been processed for example resulting in a grid space likelihood score for the respective processed grid spaces. As an illustrative example in the respective sixty grid spaces in the grid may be processed comprising processing the respective APs A E for the respective grid spaces.

Returning to at a location of the mobile device may be identified by selecting a grid space that comprises a desired grid space likelihood score e.g. one that meets mobile device location criteria . As one example a grid space that comprises a highest probability e.g. indicated by the grid space likelihood score of comprising the location of the mobile device may be selected. As one example a highest grid space likelihood score may comprise a highest probability where the grid space distance signal distance combination e.g. difference for the respective one or more APs of a grid space is lowest e.g. the grid space and signal distances are similar indicating that the mobile device sent the signals from a similar location identified by the grid space distance .

In one aspect the base path loss function may be calibrated for a mobile device and used to determine the grid score for a grid space. As one example the base path loss function e.g. based on a theoretically ideal model may be used for a set of initial grid score determinations. However a real world environment e.g. indoor environment may alter electromagnetic signals transmitted by a mobile device and or different mobile devices may transmit signals in different ways and or at different transmission powers thereby adjusting a signal strength received from what may be ideally expected. In one embodiment in this aspect the base path loss function may be calibrated for an AP resulting in an AP path loss function. As one example the AP path loss function may indicate a relationship between a distance from the AP to the mobile device and the RSS or signal attenuation for the mobile device signal received by the AP. Further in this embodiment a signal distance e.g. the first signal distance can be determined by combining the RSS e.g. or signal attenuation for the mobile device e.g. the first RSS or a first signal attenuation with the AP path loss function.

At the one or more reports e.g. from respective observer APs may be grouped into observer AP sets respectively corresponding to an AP e.g. the first AP second AP etc. identified for the candidate area comprising the grid. As one example an observer AP set for the first AP may comprise an RSS and or signal attenuation report for signals sent by a second AP third AP fourth AP and fifth AP and received by the first AP while an observer AP set for the second AP may comprise an RSS and or signal attenuation report for signals sent by the first AP third AP fourth AP and fifth AP and received by the second AP. At a next unprocessed observer AP set can be processed e.g. the first AP set .

At a known distance between the observer AP e.g. the first AP receiving the signal from the second AP and the observed AP e.g. the second AP sending the signal may be identified. As one example the known distance may be identified using grid AP data e.g. of which may identify a location of respective APs. At an expected distance can be determined using the RSS reported by the observer AP in the observer AP set e.g. using a base path loss function .

At the base path loss function adjustment may be determined using at least a combination of the known distance between the observed and observer APs and the expected distance between the observed AP e.g. second AP and the observer AP e.g. first AP . Further if the observer AP set for the first AP comprises a plurality of reports e.g. for the second AP third AP etc. a final base path loss function adjustment for the first AP may comprise a combination of corresponding base path loss function adjustments e.g. base path loss function adjustment based upon report s for second AP base path loss function adjustment based upon report s for third AP and base path loss function adjustment based upon report s for fourth AP etc. . In one embodiment resulting adjustment data for the first AP may be used to calibrate the base path loss function at resulting in a first calibrated path loss function e.g. used merely for the first AP .

In the example embodiment the procedural loop to may be iterated for respective observer AP sets e.g. observer AP set for first AP observer AP set for second AP observer AP set for third AP etc. . That is for example resulting adjustment data for respective one or more APs may be used to calibrate the base path loss function at resulting in one or more calibrated path loss functions respectively corresponding to a different AP e.g. used merely for the corresponding AP .

A system may be devised for locating a mobile device where global positioning systems GPS mobile device signal triangulation may not be available e.g. indoors . Local known wireless transmitters may be used to identify the location of the mobile device for example. Further a remote locator service may be able identify the mobile device location by comparing grid space e.g. known distances with signal distances using indications of signal strength received by one or more local known wireless transmitters from the mobile device.

In the exemplary system a grid space likelihood score determination component is operably coupled with the signal distance determination component . The grid space likelihood score determination component is configured to determine a grid space likelihood score for the grid space based at least on a combination of the signal distance and a grid space distance between the AP and the grid space e.g. from known AP data . As one example a first grid space distance between the first AP and the first grid space based on a known location of the first grid space and the first AP may be combined with the first signal distance to determine a first grid space likelihood score for the first grid space.

In the example embodiment a device location determination component is operably coupled with the grid space likelihood score determination component . The device location determination component is configured to identify the mobile device location based at least on the grid space likelihood score where at least a portion of the system is implemented at least in part using a computer based processing unit . As one example the device location determination component may compare the first grid space likelihood score for the first grid space with a second grid space likelihood score for a second grid space to determine the mobile device location . For example if the first grid space likelihood score comprises a higher probability that the mobile device is located within the first grid space as compared to the probability of the mobile device being located within the second grid space as indicated by the second grid space likelihood score the first grid space may be selected as the location of the mobile device.

The known AP data may be retrieved from an indexed database comprising data from one or more mobile device signal reports for example. A mobile device signal report can comprise information related to a signal received by an AP such as a RSS a mobile device ID a data packet ID for a data packet comprised in the signal a time stamp corresponding to a time the signal was received by the AP a transmission power of the mobile device an AP ID and or an AP location for example.

As one example the grid space identification component may create a grid comprising a plurality of grid spaces which overlays a candidate area e.g. a floor of a selected building that may comprise the location of a mobile device. In this example a location of the respective grid spaces may be known in relation to a position in the candidate area. In this way along with a known AP location a first grid space distance between a first grid space and a first AP may be identified.

In one embodiment the grid space identification component can be configured to determine a grid layout for an area e.g. the candidate area based at least on a one or more known AP locations e.g. in the known AP data for APs that received a signal from the mobile device during a desired time period. As one example a set of AP locations may be identified from the indexed database based on a mobile device ID that corresponds to one or more RSSs e.g. RSS data from the desired time period which may correspond to one or more APs. In this example one or more APs may be filtered by filtering out those AP locations that do not meet a distance threshold. For example an AP that is located outside of the candidate area e.g. another building and or floor may comprise an AP location that is outside the distance threshold. In this way a set of one or more filtered AP locations may correspond to one or more APs that are comprised within the candidate area and thereby are more likely to be within the grid layout.

In one embodiment the signal distance determination component may be configured to combine a base path loss function for a grid space with an indication of RSS e.g. or signal attenuation associated with an AP from the mobile device to determine a signal distance between the grid space and the AP. Further a function calibration component may be configured to calibrate the base path loss function for mobile device. As one example the base e.g. ideal path loss function may not account for environment conditions of the candidate area e.g. building configuration building components electronic devices etc. and or a type of mobile device e.g. transmission power platform operating system etc. . In this example the base path loss function may be calibrated for the mobile device resulting in a mobile device path loss function.

In one embodiment the function calibration component may calibrate the base path loss function for the mobile device by determining an expected device distance between a first AP and a first grid space using the mobile device s transmission power and a first grid space distance e.g. known distance between the first grid space and the first AP . The expected distance can be compared to a first RSS where the first RSS comprises an indication of signal strength for a signal transmitted from the mobile device and received by the first AP. Further in this embodiment the function calibration component may determine a mobile device RSS difference based at least on a combination of the expected mobile device distance and first grid space distance. Additionally the base path loss function may be adjusted e.g. for the mobile device based at least upon the mobile device RSS difference. In this way for example the calibrated path loss function may account for the type of mobile device that is being detected e.g. and or real world environment comprised by the candidate area .

In one embodiment the function calibration component may be configured to calibrate the base path loss function for an AP e.g. first AP by determining an expected AP distance between a first AP and a second AP using a second AP RSS signal attenuation where the second AP RSS signal attenuation comprises an indication of signal strength signal attenuation for a signal transmitted from the second AP and received and reported by the first AP. Further in this embodiment the function calibration component may determine an AP difference based at least on a combination of the expected AP distance and a known AP distance where the known AP distance comprises a known distance between the first AP and the second AP. Additionally the base path loss function may be adjusted e.g. for the first AP based at least upon the AP difference. The calibrated path loss function e.g. for the first AP for example may address at least some of the real world environment comprised by the candidate area e.g. at least with regard to the first AP .

In the example embodiment a grid score combination component may be configured to combine a grid space likelihood score e.g. a first grid space likelihood score for the first grid space with a grid space likelihood score function resulting in a modified grid space likelihood score e.g. a first modified grid space likelihood score . As one example the grid space likelihood score function may be configured to provide a modified grid space likelihood score that indicates a probability that the mobile device is located in the corresponding grid space. As another example the grid space likelihood score function may be configured to provide a modified grid space likelihood score that is weighted based on one or more weighting factors such as a ranking of one or more RSSs for the grid space.

In one embodiment the grid score combination component may be configured to combine a first grid space likelihood score corresponding to a first AP for the grid space e.g. the first grid space a second grid space likelihood score corresponding to a second AP for the grid space a first modified grid space likelihood score corresponding to the first AP for the grid space and or a second modified grid space likelihood score corresponding to the second AP for the grid space resulting in an overall grid space likelihood score for the grid space. That is for example a first overall grid space likelihood score for the first grid space may comprise a combination of grid space likelihood scores from respective APs in the candidate area. As another example the first overall grid space likelihood score for the first grid space may comprise a combination of modified grid space likelihood scores from respective APs in the candidate area. In one embodiment the overall grid space likelihood score may be used to identify the location of the mobile device in the candidate area.

Still another embodiment involves a computer readable medium comprising processor executable instructions configured to implement one or more of the techniques presented herein. An exemplary computer readable medium that may be devised in these ways is illustrated in wherein the implementation comprises a computer readable medium e.g. a CD R DVD R or a platter of a hard disk drive on which is encoded computer readable data . This computer readable data in turn comprises a set of computer instructions configured to operate according to one or more of the principles set forth herein. In one such embodiment the processor executable instructions may be configured to perform a method such as at least some of the exemplary method of for example. In another such embodiment the processor executable instructions may be configured to implement a system such as at least some of the exemplary system of for example. Many such computer readable media may be devised by those of ordinary skill in the art that are configured to operate in accordance with the techniques presented herein.

Although the subject matter has been described in language specific to structural features and or methodological acts it is to be understood that the subject matter defined in the appended claims is not necessarily limited to the specific features or acts described above. Rather the specific features and acts described above are disclosed as example forms of implementing the claims.

As used in this application the terms component module system interface and the like are generally intended to refer to a computer related entity either hardware a combination of hardware and software software or software in execution. For example a component may be but is not limited to being a process running on a processor a processor an object an executable a thread of execution a program and or a computer. By way of illustration both an application running on a controller and the controller can be a component. One or more components may reside within a process and or thread of execution and a component may be localized on one computer and or distributed between two or more computers.

Furthermore the claimed subject matter may be implemented as a method apparatus or article of manufacture using standard programming and or engineering techniques to produce software firmware hardware or any combination thereof to control a computer to implement the disclosed subject matter. The term article of manufacture as used herein is intended to encompass a computer program accessible from any computer readable device carrier or media. Of course those skilled in the art will recognize many modifications may be made to this configuration without departing from the scope or spirit of the claimed subject matter.

Although not required embodiments are described in the general context of computer readable instructions being executed by one or more computing devices. Computer readable instructions may be distributed via computer readable media discussed below . Computer readable instructions may be implemented as program modules such as functions objects Application Programming Interfaces APIs data structures and the like that perform particular tasks or implement particular abstract data types. Typically the functionality of the computer readable instructions may be combined or distributed as desired in various environments.

In other embodiments device may include additional features and or functionality. For example device may also include additional storage e.g. removable and or non removable including but not limited to magnetic storage optical storage and the like. Such additional storage is illustrated in by storage . In one embodiment computer readable instructions to implement one or more embodiments provided herein may be in storage . Storage may also store other computer readable instructions to implement an operating system an application program and the like. Computer readable instructions may be loaded in memory for execution by processing unit for example.

The term computer readable media as used herein includes computer storage media. Computer storage media includes volatile and nonvolatile removable and non removable media implemented in any method or technology for storage of information such as computer readable instructions or other data. Memory and storage are examples of computer storage media. Computer storage media includes but is not limited to RAM ROM EEPROM flash memory or other memory technology CD ROM Digital Versatile Disks DVDs or other optical storage magnetic cassettes magnetic tape magnetic disk storage or other magnetic storage devices or any other medium which can be used to store the desired information and which can be accessed by device . Any such computer storage media may be part of device .

Device may also include communication connection s that allows device to communicate with other devices. Communication connection s may include but is not limited to a modem a Network Interface Card NIC an integrated network interface a radio frequency transmitter receiver an infrared port a USB connection or other interfaces for connecting computing device to other computing devices. Communication connection s may include a wired connection or a wireless connection. Communication connection s may transmit and or receive communication media.

The term computer readable media may include communication media. Communication media typically embodies computer readable instructions or other data in a modulated data signal such as a carrier wave or other transport mechanism and includes any information delivery media. The term modulated data signal may include a signal that has one or more of its characteristics set or changed in such a manner as to encode information in the signal.

Device may include input device s such as keyboard mouse pen voice input device touch input device infrared cameras video input devices and or any other input device. Output device s such as one or more displays speakers printers and or any other output device may also be included in device . Input device s and output device s may be connected to device via a wired connection wireless connection or any combination thereof. In one embodiment an input device or an output device from another computing device may be used as input device s or output device s for computing device .

Components of computing device may be connected by various interconnects such as a bus. Such interconnects may include a Peripheral Component Interconnect PCI such as PCI Express a Universal Serial Bus USB firewire IEEE 1394 an optical bus structure and the like. In another embodiment components of computing device may be interconnected by a network. For example memory may be comprised of multiple physical memory units located in different physical locations interconnected by a network.

Those skilled in the art will realize that storage devices utilized to store computer readable instructions may be distributed across a network. For example a computing device accessible via network may store computer readable instructions to implement one or more embodiments provided herein. Computing device may access computing device and download a part or all of the computer readable instructions for execution. Alternatively computing device may download pieces of the computer readable instructions as needed or some instructions may be executed at computing device and some at computing device .

Various operations of embodiments are provided herein. In one embodiment one or more of the operations described may constitute computer readable instructions stored on one or more computer readable media which if executed by a computing device will cause the computing device to perform the operations described. The order in which some or all of the operations are described should not be construed as to imply that these operations are necessarily order dependent. Alternative ordering will be appreciated by one skilled in the art having the benefit of this description. Further it will be understood that not all operations are necessarily present in each embodiment provided herein.

Moreover the word exemplary is used herein to mean serving as an example instance or illustration. Any aspect or design described herein as exemplary is not necessarily to be construed as advantageous over other aspects or designs. Rather use of the word exemplary is intended to present concepts in a concrete fashion. As used in this application the term or is intended to mean an inclusive or rather than an exclusive or. That is unless specified otherwise or clear from context X employs A or B is intended to mean any of the natural inclusive permutations. That is if X employs A X employs B or X employs both A and B then X employs A or B is satisfied under any of the foregoing instances. Further At least one of A and B and or the like generally means A or B or both A and B. In addition the articles a and an as used in this application and the appended claims may generally be construed to mean one or more unless specified otherwise or clear from context to be directed to a singular form.

Also although the disclosure has been shown and described with respect to one or more implementations equivalent alterations and modifications will occur to others skilled in the art based upon a reading and understanding of this specification and the annexed drawings. The disclosure includes all such modifications and alterations and is limited only by the scope of the following claims. In particular regard to the various functions performed by the above described components e.g. elements resources etc. the terms used to describe such components are intended to correspond unless otherwise indicated to any component which performs the specified function of the described component e.g. that is functionally equivalent even though not structurally equivalent to the disclosed structure which performs the function in the herein illustrated exemplary implementations of the disclosure. In addition while a particular feature of the disclosure may have been disclosed with respect to only one of several implementations such feature may be combined with one or more other features of the other implementations as may be desired and advantageous for any given or particular application. Furthermore to the extent that the terms includes having has with or variants thereof are used in either the detailed description or the claims such terms are intended to be inclusive in a manner similar to the term comprising. 

