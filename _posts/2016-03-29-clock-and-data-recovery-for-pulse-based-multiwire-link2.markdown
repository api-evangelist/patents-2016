---

title: Clock and data recovery for pulse based multi-wire link
abstract: A method and an apparatus are provided. The apparatus may includes a clock recovery circuit having a plurality of input latches configured to assume a first state when a first pulse is received in one or more of a plurality of input signals, combinational logic configured to provide a second pulse response to the first pulse, a delay circuit configured to produce a third pulse on a receive clock that is delayed with respect to the second pulse, a plurality of output flip-flops configured to capture the first state when triggered by the third pulse. The first state may identify which of the plurality of input signals received input pulses.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09621332&OS=09621332&RS=09621332
owner: QUALCOMM Incorporated
number: 09621332
owner_city: San Diego
owner_country: US
publication_date: 20160329
---
This application claims the benefit of U.S. Provisional Application Ser. No. 62 146 801 filed in the U.S. Patent Office on Apr. 13 2015 the entire content of which being incorporated herein by reference and for all applicable purposes.

The present disclosure relates generally to communication systems and more particularly to clock and data recovery from a multi wire interface that employs pulse based signaling.

Manufacturers of mobile devices such as cellular telephones may obtain components of the mobile devices from various sources including components from different manufacturers. For example an application processor in a cellular phone may be obtained from a first manufacturer while the display for the cellular phone may be obtained from a second manufacturer. The application processor and the display or another device may be interconnected using a standards based or proprietary physical interface. For example the display may have an interface that conforms to the Display System Interface DSI standard specified by the Mobile Industry Processor Interface MIPI Alliance.

As the capabilities and functionality of mobile devices continues to grow there exists an ongoing demand for new techniques to provide flexible and reliable communications in increasingly challenging signaling environments.

In an aspect of the disclosure a method a computer program product and an apparatus are provided that relate to pulse based signaling transmitted over a multi wire interface and clock and data recovery for interfaces that employ pulse based signaling.

In various aspects an apparatus includes a clock recovery circuit. The clock recovery circuit may include a plurality of input latches configured to assume a first state when a first pulse is received in one or more of a plurality of input signals combinational logic configured to provide a second pulse response to the first pulse a delay circuit configured to produce a third pulse on a receive clock that is delayed with respect to the second pulse a plurality of output flip flops configured to capture the first state when triggered by the third pulse. The first state may identify which of the plurality of input signals has received input pulses.

In one aspect the clock recovery circuit includes a one shot circuit configured to fix a duration of the second pulse.

In another aspect the first state is output as a digit of a multi digit number. The plurality of input signals may be received from a multi wire interface that includes N wires and the multi digit number is expressed as a base 2 1 number. In one example the plurality of input signals is received from a two wire interface and the multi digit number is expressed as a ternary number. In another example the plurality of input signals is received from a three wire interface and the multi digit number is expressed as a septenary number.

In another aspect the first state is representative of first information encoded in return to zero pulse encoded signals received from a first portion of the plurality of input signals. The apparatus may include a receiver circuit configured to decode second information from one or more non return to zero signals received from a second portion of the plurality of input signals.

In some examples the plurality of input signals is received from a capacitively coupled multi wire interface or from an inductively coupled multi wire interface. In other examples the plurality of input signals is received from an optical interface.

The clock recovery circuit may include a counter configured to count a number of transitions on one or more wires occurring between consecutive pulses provided on the receive clock.

In various aspects a method for recovering a clock signal includes generating an edge in a receive clock responsive to detecting a pulse on one or more wires of a multi wire interface in each of a plurality of transmission intervals providing a digit of a multi digit number after the edge in the receive clock is generated in each of the plurality of transmission intervals combining digits generated in the plurality of transmission intervals to obtain the multi digit number and transcoding the multi digit number to obtain received data. Each bit of the digit may identify whether a pulse was transmitted on one wire of the multi wire interface during a corresponding transmission interval. A pulse is present on at least one wire of the multi wire interface during each of the plurality of transmission intervals.

In another aspect the multi wire interlace includes N wires and the multi digit number is expressed as a base 2 1 number. In one example the multi wire interface is a two wire interface and the multi digit number is expressed as a ternary number in another example the multi wire interface is a three wire interface where the multi digit number is expressed as a septenary number.

In one aspect the method includes decoding first information from return to zero pulse encoded signals received from the multi wire interface and decoding second information from one or more non return to zero signals received from the multi wire interface.

In some examples capacitively coupled signals or inductively coupled signals are received from the multi wire interface. In other examples optically coupled signals are received from the multi wire interface.

In one aspect generating the edge in the receive clock includes combining pulses received on the one or more wires into a combination signal and delaying the combination signal to provide the receive clock. Generating the edge in the receive clock may include combining pulses received on the one or more wires into a combination signal providing the combination signal to one shot logic that is configured to produce a fixed duration pulse responsive to an edge in the combination signal and delaying the fixed duration pulse to provide a pulse in the receive clock.

In various aspects a method includes transcoding a data word into a multi digit number and transmitting a combination of pulses over a plurality of connectors for each transmission interval in a sequence of transmission intervals where each digit of the multi digit number defines the combination of pulses for a corresponding transmission interval in the sequence of transmission intervals. Clock information is embedded in the multi digit number when the data word is transcoded. Clock information may be embedded in the multi digit number by ensuring that a pulse is transmitted on at least one of the plurality of connectors during each transmission interval in the sequence of transmission intervals.

In some aspects the plurality of connectors includes N connectors and the multi digit number is expressed as a base 2 1 number. In one example the plurality of connectors includes two connectors and the multi digit number is expressed as a ternary number. In another example the plurality of connectors includes three connectors and the multi digit number is expressed as a septenary number.

In one aspect the method includes encoding information in one or more non return to zero signals and transmitting the one or more non return to zero signals over one or more other connectors of the multi wire communication link.

In some aspects combinations of pulses are provided to the plurality of connectors through a capacitive inductive or optical coupling.

In various aspects a communication interface includes a transcoder configured to produce a multi digit number from a data word and circuitry configured to provide a combination of pulses for transmission over a plurality of connectors during one transmission interval in a sequence of transmission intervals. The multi digit number may include embedded clock information by ensuring that a pulse is transmitted on at least one of the plurality of connectors during each transmission interval in the sequence of transmission intervals. Each combination of pulses may be defined by a digit of the multi digit number.

In some aspects the plurality of connectors includes N connectors and the multi digit number is expressed as a base 2 1 number. In one example the plurality of connectors includes two connectors and the multi digit number is expressed as a ternary number. In another example the plurality of connectors includes three connectors and the multi digit number is expressed as a septenary number.

In one aspect the communication interface includes a transmitter circuit configured to encode information in one or more non return to zero signals and transmit the one or more non return to zero signals over one or more other connectors of the communication interface.

The communication interface may include a transmitter configured to capacitively couple inductively couple or optically couple the transmitter to the plurality of connectors.

In various aspects of the disclosure a processor readable storage medium stores or maintains code that when executed by one or more processors causes the one or more processors to perform certain methods disclosed herein. The storage medium may include non transitory storage media or transitory storage media.

The detailed description set forth below in connection with the appended drawings is intended as a description of various configurations and is not intended to represent the only configurations in which the concepts described herein may be practiced. The detailed description includes specific details for the purpose of providing a thorough understanding of various concepts. However it will be apparent to those skilled in the art that these concepts may be practiced without these specific details. In some instances well known structures and components are shown in block diagram form in order to avoid obscuring such concepts.

Several aspects of communication systems will now be presented with reference to various apparatus and methods. These apparatus and methods will be described in the following detailed description and illustrated in the accompanying drawings by various blocks modules components circuits steps processes algorithms etc collectively referred to as elements . These elements may be implemented using electronic hardware computer software or any combination thereof. Whether such elements are implemented as hardware or software depends upon the particular application and design constraints imposed on the overall system.

Certain aspects disclosed herein relate to communication links provided between devices and or between components or subcomponents of various devices in an apparatus multiple IC devices or circuits within an IC device may communicate rising a bus that includes wires connectors traces optical media and so on. In some instances it may be desirable to decouple the IC devices or circuits within an IC device and or to provide capacitive inductive or optical connections to the connectors of a bus. In some examples a communication interface that communicates using pulse based signaling may be defined. The communication interface may be proprietary or based on industry standards. Clock and data recovery circuits system and methods are disclosed that enable a receiver to reliably generate a receive clock signal that can be used to capture and decode information encoded in pulses transmitted on one or more wires of the bus.

Certain aspects disclosed herein relate to the operation of a communication interface and to clock and data recovery from a multi wire link. The communication interface may be based on standards defined link or may operate according to proprietary protocols. The communication interface may be adapted to communicate using pulse based signaling.

In some instances the communication interface may provide a multi signal data transfer system that employs or is based on differential signaling including low voltage differential signaling LVDS . Data may be encoded in symbols that define or control signaling on the multi wire link. The data may be encoded using one or more transcoders to perform digital to digital data conversion between different encoding types. A transcoder may be adapted to embed clock information in a sequence of encoded symbols by ensuring that a symbol transition occurs at the end of every symbol transmission period. Embedding clock information with data can reduce the number of interconnects associated with a multi wire communication link with a corresponding reduction in device pin count and or semiconductor real estate used on an IC device to implement communication interface circuit and input output I O . Embedding clock information with data may obviate the need to send clock information in separate data lanes where a data lane may correspond to a differential transmission path. Embedding clock information by transcoding is an effective way to minimize skew between clock and data signals as well as to eliminate the necessity of a phase locked loop PLL to recover the clock information from the data signals.

In one example the communication interface may operate according to a camera control interface CCI protocol defined by MIPI Alliance standards or a derivative thereof. The CCI protocol uses a two wire bi directional half duplex serial interface configured as a bus connecting a master and one or more slaves. Conventional CCI is compatible with a protocol used in a variant of the Inter Integrated Circuit I2C bus and is capable of handling multiple slaves on the bus with a single master. The CCI bus includes Serial Clock SCL and Serial Data SDA lines. CCI devices and I2C devices can be deployed on the same bus such that two or more CCI devices may communicate using CCI protocols while any communication involving an I2C bus uses I2C protocols. Later versions of CCI provide higher throughputs using modified protocols to support faster signaling rates. A CCI extension CCIe bus may be used to provide higher data rates for devices that are compatible with CCIe bus operations. Such devices may be referred to as CCIe devices and the CCIe devices can attain higher data rates when communicating with each other by encoding data as symbols transmitted on both the SCL line and the SDA line of a conventional CCI bus. CCIe devices and I2C devices may coexist on the same CCIe bus such that in a first time interval data may be transmitted using CCIe encoding and other data may be transmitted in a different time interval according to I2C signaling conventions.

The communication link may provide multiple channels and . One or more channels may be bidirectional and may operate in half duplex and or full duplex modes. One or more channels and may be unidirectional. The communication link may be asymmetrical providing higher bandwidth in one direction. In one example described herein a first communication channel may be referred to as a forward link while a second communication channel may be referred to as a reverse link. The first IC device may be designated as a host system or transmitter while the second IC device may be designated as a client system or receiver even if both IC devices and are configured to transmit and receive on the communication link . In one example the first communication channel may operate at a higher data rate when communicating data from a first IC device to a second IC device while the second communication channel may operate at a lower data rate when communicating data from the second IC device to the first IC device .

The IC devices and may each have a controller sequencer or other computing device or processor . In one example the first IC device may perform core functions of the apparatus including communicating through a transceiver and an antenna while the second IC device may support a user interface that manages or operates a display controller . In this example the second IC device may be adapted to control operations of a camera or video input device using a camera controller . Other features supported by one or more of the IC devices and may relate to a keyboard a voice recognition component and other input or output devices. The display controller may include circuits and software drivers that support displays such as a liquid crystal display LCD panel touch screen display indicators and so on. The storage media and may include transitory and or non transitory storage devices adapted to maintain instructions and data used by respective processors and and or other components of the IC devices and . Communication between each processor and its corresponding storage media and and other modules and circuits may be facilitated by one or more bus and respectively.

The second communication channel may be configured as a reverse link that may be operated in the same manner as the first communication channel when the first communication channel is configured as a forward link. The first communication channel and the second communication channel may be capable of transmitting at comparable speeds or at different speeds where speed may be expressed as data transfer rate and or clocking rates. Data rates on a forward link may be substantially the same as data rates on the reverse link or the data rates in opposite directions may differ by orders of magnitude depending on the application. In some applications a single communication channel may be configured as a bidirectional link that supports communications between the first IC device and the second IC device . The first communication channel and or second communication channel may be configurable to operate in a bidirectional mode and for example the forward and reverse communication channels and may share the same physical connections and operate in a half duplex manner. In one example the communication link may be operated to communicate control command and other information between the first IC device and the second IC device in accordance with an industry or other standard.

In some instances the forward and reverse communication channels and may be configured or adapted to support a wide video graphics array WVGA frames per second LCD driver IC without a frame buffer delivering pixel data at 810 Mbps for display refresh. In another example the forward and reverse communication channels and may be configured or adapted to enable communications between with dynamic random access memory DRAM such as double data rate synchronous dynamic random access memory SDRAM . Encoding devices and or may be configured to encode multiple bits per clock transition and multiple sets of wires can be used to transmit and receive data from the SDRAM control signals address signals and other signals.

The forward and reverse communication channels and may comply with or be compatible with application specific industry standards. In one example certain MIPI Alliance standards define physical layer interfaces between an application processor IC device and an IC device that supports the camera or display in a mobile device. The MIPI Alliance standards may define specifications that govern the operational characteristics of products that comply with standards or specifications defined by the MIPI Alliance for mobile devices. In some instances the MIPI Alliance standards or specifications may be implemented in interfaces that employ complimentary metal oxide semiconductor CMOS parallel busses.

The communication link of may be implemented as a wired bus that includes a plurality of signal wires denoted as N wires . The N wires may be configured to carry data encoded in symbols where clock information is embedded in a sequence of the symbols transmitted over the plurality of wires. Encoding schemes that embed timing information by ensuring transitions between consecutive symbols may be referred to as transition encoding schemes. Transition encoding schemes may be used for example in N factorial N interfaces and CCIe interfaces.

A termination impedance typically resistive couples each of the N wires of the communication link to a common center point in a termination network . It will be appreciated that the signaling state of the N wires of the communication link reflects a combination of the currents in the termination network attributed to the differential line drivers coupled to each wire. It will be further appreciated that the center point is a null point whereby the currents in the termination network cancel each other at the center point . In one example each of the 4 wires in a 4 interface is connected to a terminal of a termination network . Each terminal is coupled by a termination resistor to a center point of the termination network .

An N encoding scheme need not use a separate clock channel and or non return to zero decoding because at least one of the Csignals in the link transitions between consecutive symbols. Effectively the transcoder ensures that a transition occurs between each pair of consecutive symbols transmitted on the N wires of the communication link by producing a sequence of symbols in which signaling states of the N wires change between consecutively transmitted symbols. In the example depicted in four wires are provided N 4 and the 4 wires can carry C 6 differential signals. The transcoder may employ a mapping scheme to generate raw symbols for transmission on the N wires. The transcoder may map data bits to a set of transition numbers. The transition numbers may be used to select raw symbols for transmission based on the value of the immediately preceding symbol such that the selected raw symbol is different from the preceding raw symbol. The raw symbols may be serialized by the serializers to obtain a sequence of symbols for transmission over the N wires of the communication link . In one example a transition number may be used to lookup a data value corresponding to the second of the consecutive raw symbols with reference to the first of the consecutive raw symbols. At the receiver a transcoder may employ a mapping to determine a transition number that characterizes a difference between a pair of consecutive raw symbols using a lookup table for example. The transcoders operate on the basis that every consecutive pair of raw symbols includes two different symbols.

The transcoder at the transmitter may select between N 1 available signaling states at every symbol transition in one example a 4 system provides 4 1 23 signaling states for the next symbol to be transmitted at each symbol transition. The hit rate may be calculated as log available states per transmit clock cycle.

According to certain aspects disclosed herein double data rate DDR signaling may be employed to increase the interface bandwidth by transmitting two symbols in each period of the transmit clock . Symbol transitions occur at both the rising edge and falling edge of the transmit clock in a system using DDR clocking. The total available states in the transmit clock cycle is 4 1 23 529 and the number of data bits that can be transmitted per symbol may be calculated as log 529 9.047 bits.

A receiving device receives the sequence of symbols using a set of line receivers where each receiver in the set of line receivers determines differences in signaling states on one pair of the N wires of the communication link . Accordingly Creceivers are used where N represents the number of wires. The Creceivers produce a corresponding number of raw symbols as outputs. In the 4 wire example the signals received on the 4 wires are processed by 6 receivers C 6 to produce a raw symbol signal that is provided to a clock and data recovery CDR circuit and deserializers . The raw symbol signal is representative of the signaling state of the N wires of the communication link and the CDR circuit may process the raw symbol signal to generate a receive clock signal that can be used by the deserializer .

The receive clock signal may be a DDR clock signal that can be used by external circuitry to process output data provided by the transcoder . The transcoder decodes a block of received symbols from the deserializer by comparing each symbol to its immediate predecessor. The transcoder produces output data corresponding to the data bits provided to the transmitter .

At the receiver a sequence of symbols may be converted to a quinary transition number by a line decoder . The transition number may then be provided to a quinary to binary decoder which produces the output binary data word . The line decoder observes the difference is signaling states between two consecutive symbols and may generate a digit of the quinary transition number using the same indexing scheme used by the transmitter .

In the example illustrated in an imaging device is configured to operate as a slave device on the serial bus . The imaging device may be adapted to provide a sensor control function that manages an image sensor for example. In addition the imaging device may include configuration registers or other storage control logic a transceiver and line drivers receivers and . The control logic may include a processing circuit such as a state machine sequencer signal processor or general purpose processor. The transceiver may include a receiver a transmitter and common circuits including timing logic and storage circuits and or devices. In one example the transmitter encodes and transmits data based on timing provided by a clock generation circuit .

At the receiver a sequence of symbols may be converted to a ternary transition number by a line decoder . The transition number may then be provided to a ternary to binary decoder which produces the output binary data word . The line decoder observes the difference is signaling states between two consecutive symbols and may generate a digit of the ternary transition number using the same indexing scheme used by the transmitter . Converting between numeral systems may be referred to as transcoding including converting between binary and ternary numbers for example.

As illustrated by the timing diagram the symbol numbers generated by the line encoder see the line encoder in for example correspond to signaling states of the SDA wire and SCL wire of the serial bus . The transition detection circuit may produce one or more indications corresponding to detected transitions in the signaling state of the wires . These indications may include signals that are processed to produce pulses on the clock signal .

The comparator compares the SI signal with the S signal and outputs a binary comparison signal the NE signal . The set reset latch may receive the NE signal from the comparator and output a signal the NEFLT signal which is a filtered version of the NE signal . The operation of the set reset latch can be configured to remove any transient instability in the NE signal where the transient instability is exhibited as spikes in the NE signal . The Reset input of the set reset latch may be prioritized such that the NEFLT signal is reset when the RXCLK signal is high regardless of the state of the NE signal .

In some instances the RXCLK signal may be used by external circuitry to sample the data output of the CDR circuit . In one example the RXCLK signal or a derivative signal of the RXCLK signal may be provided to decoder or deserializer circuits. In some instances other signals may be used to generate a clock signal for external circuitry. The level latches receive the SI signal and output the S signal where the level latches are triggered or otherwise controlled by the RXCLK signal . In one example the S signal may serve as the symbols output of the CDR circuit . In other examples additional circuitry may be included in the CDR circuit to delay latch and or otherwise condition the S signal for use as the symbols output of the CDR circuit .

In operation the comparator compares the SI signal with the S signal which is output from the level latches . The comparator drives the NE signal to a first state e.g. logic low when the SI signal and the S signal are equal and to a second state e.g. logic high when the SI signal and the S signal are not equal. The NE signal is in the second state when the SI signal and the S signal are representative of different symbols. Thus the second state indicates that a transition is occurring.

As can be appreciated from the timing diagram the S signal is essentially a delayed and filtered version of SI signal in which transients or glitches have been removed because of the delay between the SI signal and the S signal . Multiple transients or glitches in the SI signal may be reflected as spikes in the NE signal but these spikes are masked from the NEFLT signal through the operation of the set reset circuit. Moreover the RXCLK signal is resistant to line skew and glitches in the symbol transitions based on the use of the delay element provided in the feedback path to the level latches and set reset latch whereby the RXCLK signal controls the reset function of the set reset latch .

At the commencement of a transition between a first symbol value S and a next symbol value S the SI signal begins to change state. The state of the SI signal may be different from S due to the possibility that intermediate or indeterminate states including transients or glitches may occur during the transition between S and S. These transients or glitches may be caused for example by inter wire skew over under shoot crosstalk etc.

The NE signal becomes high as soon as the comparator detects a difference in values between the SI signal and the S signal and the transition high of the NE signal asynchronously sets the set reset latch output driving the NEFLT signal high. The NEFLT signal is maintained in its high state until the set reset latch is reset by a high state of the IRXCLK signal . The RXCLK signal is a delayed version of the NEFLT signal .

The transients or glitches on the SI signal may represent invalid data. These transients or glitches may contain a short period of the previous symbol value S and may cause the NE signal to return low for short periods of time. Transitions of the SI signal may generate spikes on the NE signal . The spikes are effectively filtered out and do not appear in the NEFLT signal .

The high state of the NEFLT signal causes the RXCLK signal to transition high after a delay period caused by the delay element . The high state of RXCLK signal resets the set reset latch output causing the NEFLT signal to transition to a low state. The high state of the IRXCLK signal also enables the level latches and the SI signal value may be output on the S signal .

The comparator detects that the S signal for symbol S matches the symbol S value present on the SI signal and switches its output the NE signal low. The low state of the NEFLT signal causes the IRXCLK signal to go low after a delay period caused by the delay element . This cycle repeats for each transition in the SI signal . At a time after the failing edge of the IRXCLK signal a new symbol S may be received and may cause the SI signal to switch its value in accordance with the next symbol S.

The CDR circuit illustrated in represents one of various examples of such circuits and the CDR circuit may be adapted or configured for use in a variety of communication interfaces. In some instances benefit may be derived from the use of other types of CDR circuit that are adapted or configured to delay or advance a sampling edge with respect to a period of time during which a received symbol is stable and can be reliably captured. For example the type and or configuration of the receivers may be determined based on the signal encoding techniques employed in an interface. In a first example a two single ended receiver configuration may be employed to receive signals from a two wire CCIe serial bus. In a second example a multi wire interface may carry N LVDS signals that received by N differential receivers . In a third example a three receiver configuration may be employed to compare pairs of signals received from a three wire N 3 interface which is terminated by a resistance network . In a fourth example a six receiver configuration may be employed compare signals received from different combinations of two signals received on a four wire N 4 encoded interface which is terminated by a resistance network

Certain aspects disclosed herein relate to interfaces that encode data in pulses rather than in signaling state or transitions between signaling states. Pulse based signaling may be used when signals are capacitively inductively or optically coupled or when a signal channel encodes information in events and does not support encoding using signaling state. In such instances signal conversion and or bridging may be performed to interface transition encoded state based interfaces with signal channels that do not carry state information.

Multi wire interfaces that use signaling state based encoding may be adapted or otherwise modified to encode information in the presence or absence of a pulse during a transmission interval. Each wire of the multi wire interface may carry a pulse during each transmission interval and at least one wire carries a pulse during any transmission interval. A clock signal may be generated by providing an edge on the clock signal corresponding to the first detected pulse in each transmission interval.

The timing diagram illustrates reception of a data word in a sequence of transmission intervals for a two wire serial bus. Pulses may be transmitted on the SDA wire or the SCL wire . A sequence of clock pulses is generated on the receive clock signal based on the occurrence of a pulse on either or both of the SDA wire or the SCL wire .

In the timing diagram the pulses on the SDA wire and the SCL wire are depicted has having a 50 duty cycle. In some instances the pulses may have a duty cycle that is greater or less than 50 such that the pulses are defined as having a high state that is longer in duration than the low state or a high state that is shorter in duration than the low state. The timing of the pulses may also vary with respect to a temporal reference point such as an edge of a transmit clock at the transmitter. In one example the SDA wire and or the SCL wire may remain in a low signaling state at a first occurring reference point transitioning high when a pulse is to be transmitted such that the wire or transitions low at or near a second occurring reference point . In another example the SDA wire and or the SCL wire may transition to a high signaling state at the a first occurring reference point when a pulse is to be transmitted and the wire transitions low at some point close to the mid point between the first occurring reference point and the second occurring reference point . In another example a pulse on the SDA wire and or the SCL wire may be centered around a time close to the mid point between the first occurring reference point and the second occurring reference point or centered on some other point in time such that the wire is in the low state for some duration of time before and after each reference point . The polarity of the signaling states for each of these examples may be inverted as desired or indicated by design considerations.

The SFOR signal is provided to a delay element that delays the pulses in the SFOR signal to obtain the RXCLK signal with delayed pulses . The delay element may be configured to produce a delay that has a duration sufficient to ensure that each of the trailing edges of pulses on the RXCLK signal occurs after the latest possible time when the input signals have stabilized. For example the pulses received in the signals may be subject to different propagation times such that a delay occurs between the pulses . The delay associated with the delay element may operate to prevent the occurrence of multiple pulses or glitches on the RXCLK signal in the latter example. The RXCLK signal resets the set reset latches for which the reset R inputs are prioritized over the set S inputs.

The RXCLK signal clocks a pair of output flip flops S each of which is coupled to the output of one of the set reset latches through a corresponding inverter . At the time the output flip flops are clocked the output of a set reset latch or is in a set state when a pulse was received in its corresponding input signal and the output of the set reset latch or is in a cleared state when no pulse was received in its corresponding input signal . Inverted outputs of the set reset latches may be provided to the output flip flops to set a desired bit orientation and or to delay transitions caused by the reset of the set reset latches by the RXCLK signal . In the example the inverters and provided between the set reset latches and the output flip flops may operate as a simple form of pulse to ternary decoder.

The outputs of the output flip flops may be provided to a decoder. The outputs of the output flip flops may be processed as ternary numbers .

The SFOR signal is provided to a one shot circuit that produces fixed duration pulses and in its output signal 1SHOT . The pulses and correspond to pulses generated in the SFOR signal . The 1SHOT signal is provided to a delay element that delays the pulses in the 1SHOT signal to obtain the RXCLK signal with delayed pulses . The duration of the pulses and produced by the one shot circuit may be configured to produce a single fixed length pulse with a duration that exceeds a maximum expected delay between pulses transmitted in the different input signals . The delay element may be configured to produce a delay that has a duration sufficient to ensure that each of the trailing edges of pulses on the RXCLK signal occurs after the latest possible time when the input signals have stabilized. For example the pulses received in the signals may be subject to different propagation times such that a delay occurs between the pulses . The delay associated with the 1SHOT signal and or the delay element may operate to prevent the occurrence of multiple pulses or glitches on the RXCLK signal in the latter example. The RXCLK signal resets the set reset latches for which the reset R inputs are prioritized over the set S inputs.

The RXCLK signal clocks a pair of output flip flops each of which is coupled to the output of one of the set reset latches . At the time the output flip flops are clocked the output of a set reset latch or is in a set state when a pulse was received in its corresponding input signal and the output of the set reset latch or is in a cleared state when no pulse was received in its corresponding input signal . Inverted outputs of the set reset latches may be provided to the output flip flops to set a desired bit orientation and or to delay transitions caused by the reset of the set reset latches by the RXCLK signal . In the example the inverters and provided between the set reset latches and the output flip flops may operate as a simple form of pulse to ternary decoder.

The outputs of the output flip flops may be provided to a decoder. The outputs of the output flip flops may be processed as ternary numbers .

Certain aspects disclosed herein may be applied to multi connector interfaces that include one or more connectors that carry pulse encoded signals. illustrates certain generalized examples of the use of pulse coded signaling. In a first example each of the signals carried on a multi connector interface is pulse encoded. That is encoding provides a return to zero pulse in at least one signal and or in each of a sequence of transmission intervals . Data may be encoded in the presence or absence of a return to zero pulse in a signal and or in the patterns of return to zero pulses provided in the signals transmitted on a multi connector serial communication link. In the first example three signals are illustrated although the multi connector interface may include any number of connectors.

In a second example one or more signals here two signals carried on a multi connector interface is pulse encoded while information is encoded in signaling state of one or more other signals during each of a sequence of transmission intervals . In some instances information may be encoded in transitions in signaling state of one or more signals that are not pulse encoded.

In some instances a multi connector interface may employ transcoding to convert data to combinations of pulses transmitted on the signals and or in the first example or to convert data to combinations of pulses transmitted on the signals and or in the second example .

A first type of signal may represent a return to zero RZ or pulse encoded mode of signaling as illustrated in the example of for example . A pulse may be provided within an interval delineated by a start point and an end point which may correspond to transmit clock edges or the like. As illustrated by the examples and of the pulse may be positioned within the start point and end point or may have an edge coincident with the start point or the end point . Information may be encoded in the presence or absence of a pulse between the start point and end point . In this example the period between the start point and end point may correspond to a single symbol interval.

A second type of signal may represent a return to zero or pulse encoded mode of signaling where multiple pulses may be provided within an interval delineated by the start point and the end point which may correspond to a transmit clock edges or the like. Edges of one or more pulses may be positioned within the start point and end point or may be coincident with the start point and or the end point . Information may be encoded in the presence or absence of the pulses and or in the combination of pulses transmitted between the start point and end point and or the combination of pulses transmitted on different wires of the multi wire communication interface. The number of pulses positioned within the start point and end point may be selected based on application needs or designer preference in this example the period between the start point and end point may correspond to a three symbol intervals.

A third type of signal may represent a non return to zero mode of signaling where information may be encoded in the signaling state of a wire between the start point and end point and or the combination of states provided on different wires of the multi wire communication interface. In this example the period between the start point and end point may correspond to a single symbol interval in some instances information may be encoded in transitions of signaling state at the start point and or the end point .

A fourth type of signal may represent a non return to zero mode of signaling where multiple bits of information may be encoded between the start point and end point . Here two three or more bits may be transmitted in the signaling state of a wire and or the combination of states provided on one or more wires of the multi wire communication interface. In this example the period between the start point and end point may correspond to three symbol intervals in some instances information may be encoded in transitions of signaling state occurring at certain points between the start point and the end point .

Certain of the types of signals illustrated in can produce one two or more toggles within one symbol cycle. A delay element of a CDR circuit see may be configured to filter the multiple toggles such that a single pulse is generated on the RXCLK signal for each symbol. When an odd number of toggles are provided in the same cycle on a signal the flip flops may capture opposite values from previous cycle. When an even number of toggles occur in the same cycle on a signal the same value may be captured from the previous cycle. Odd or even may carry extra in band information. When both odd and even numbers of toggles occur in the same cycle on a signal a counter may be provided to count the number of toggles and or either rising or falling edges within a single symbol. The counters may provide additional in band information.

The first type of signal may use single pulse return to zero RZ encoding where information on a wire is encoded in the presence or absence of a pulse. The second type of signal may encode data in the number of RZ pulses transmitted during a symbol interval where the number of pulses may include zero pulses. The third type of signal may encode data in a single non return to zero NRZ toggle where for example a transition in signaling state at the beginning of or during a symbol interval indicates one binary value and an absence of a transition in signaling state at the beginning of or during a symbol interval indicates another binary value. The fourth type of signal may encode data in the number of NRZ toggles that occur within a symbol interval where the number of transitions may include zero transitions. The fifth type of signal may encode data using presence absence or number of pulses and presence or absence of a toggle. For example the fifth type of signal may be used in a bus system that couples some devices with an input filter that filters out a short pulses. In one example an I2C slave device may not see the short pulses within a symbol interval but can recognize a state transition at the end of a symbol interval. Accordingly a toggle or no toggle occurring at the end of a symbol interval adds state transition information observable for the I2C slave device with a spike filter. For example a number of pulses may convey information between first group of devices and state transition provided using a toggle at the end of the symbol interval can convey information between a second group of devices.

In the illustrated example the processing circuit may be implemented with a bus architecture represented generally by the bus . The bus may include any number of interconnecting buses and bridges depending on the specific application of the processing circuit and the overall design constraints. The bus links together various circuits including the one or more processors and storage . Storage may include memory devices and mass storage devices and may be referred to herein as computer readable media and or processor readable media. The bus may also link various other circuits such as timing sources timers peripherals voltage regulators and power management circuits. A bus interface may provide an interface between the bus and one or more transceivers . A transceiver may be provided for each networking technology supported by the processing circuit in some instances multiple networking technologies may share some or all of the circuitry or processing modules found in a transceiver . Each transceiver provides a means for communicating with various other apparatus over a transmission medium. Depending upon the nature of the apparatus a user interface e.g. keypad display speaker microphone joystick may also be provided and may be communicatively coupled to the bus directly or through the bus interface .

A processor may be responsible for managing the bus and for general processing that may include the execution of software stored in a computer readable medium that may include the storage . In this respect the processing circuit including the processor may be used to implement any of the methods functions and techniques disclosed herein. The storage may be used for storing data that is manipulated by the processor when executing software and the software may be configured to implement any one of the methods disclosed herein.

One or more processors in the processing circuit may execute software. Software shall be construed broadly to mean instructions instruction sets code code segments program code programs subprograms software modules applications software applications software packages routines subroutines objects executables threads of execution procedures functions algorithms etc. whether referred to as software firmware middleware microcode hardware description language or otherwise. The software may reside in computer readable form in the storage or in an external computer readable medium. The external computer readable medium and or storage may include a non transitory computer readable medium. A non transitory computer readable medium includes by way of example a magnetic storage device e.g. hard disk floppy disk magnetic strip an optical disk e.g. a compact disc CD or a digital versatile disc DVD a smart card a flash memory device e.g. a flash drive a card a stick or a key drive a RAM a ROM a programmable read only memory PROM an erasable programmable read only memory EPROM an EEPROM a register a removable disk and any other suitable medium for storing software and or instructions that may be accessed and read by a computer. The computer readable medium and or storage may also include by way of example a carrier wave a transmission line and any other suitable medium for transmitting software and or instructions that may be accessed and read by a computer. Computer readable medium and or the storage may reside in the processing circuit in the processor external to the processing circuit or be distributed across multiple entities including the processing circuit . The computer readable medium and or storage may be embodied in a computer program product. By way of example a computer program product may include a computer readable medium in packaging materials. Those skilled in the art will recognize how best to implement the described functionality presented throughout this disclosure depending on the particular application and the overall design constraints imposed on the overall system.

The storage may maintain software maintained and or organized in loadable code segments modules applications programs etc. which may be referred to herein as software modules . Each of the software modules may include instructions and data that when installed or loaded on the processing circuit and executed by the one or more processors contribute to a run time image that controls the operation of the one or more processors . When executed certain instructions may cause the processing circuit to perform functions in accordance with certain methods algorithms and processes described herein.

Some of the software modules may be loaded during initialization of the processing circuit and these software modules may configure the processing circuit to enable performance of the various functions disclosed herein. For example some software modules may configure internal devices and or logic circuits of the processor and may manage access to external devices such as the transceiver the bus interface the user interface timers mathematical coprocessors and so on. The software modules may include a control program and or an operating system that interacts with interrupt handlers and device drivers and that controls access to various resources provided by the processing circuit . The resources may include memory processing time access to the transceiver the user interface and so on.

One or more processors of the processing circuit may be multifunctional whereby some of the software modules are loaded and configured to perform different functions or different instances of the same function. The one or more processors may additionally be adapted to manage background tasks initiated in response to inputs from the user interface the transceiver and device drivers for example. To support the performance of multiple functions the one or more processors may be configured to provide a multitasking environment whereby each of a plurality of functions is implemented as a set of tasks serviced by the one or more processors as needed or desired. In one example the multitasking environment may be implemented using a timesharing program that passes control of a processor between different tasks whereby each task returns control of the one or more processors to the timesharing program upon completion of any outstanding operations and or in response to an input such as an interrupt. When a task has control of the one or more processors the processing circuit is effectively specialized for the purposes addressed by the function associated with the controlling task. The timesharing program may include an operating system a main loop that transfers control on a round robin basis a function that allocates control of the one or more processors in accordance with a prioritization of the functions and or an interrupt driven main loop that responds to external events by providing control of the one or more processors to a handling function.

At block an edge is generated in a receive clock in each of a plurality of transmission intervals responsive to detecting a pulse on one or more wires of the multi wire interface. A pulse is transmitted on at least one wire of the multi wire interface during each of the plurality of transmission intervals. The multi wire interface may be a capacitively coupled interface. The multi wire interface may be an inductively coup led interface. The multi wire interface may be an optically coupled interface. The pulses received on the one or more wires may be combined into a combination signal and delayed to provide the receive clock.

At block a digit of a multi digit number is provided after the edge in the receive clock is generated in each of the plurality of transmission intervals. Each bit of the digit may identify whether a pulse was transmitted on one wire of the multi wire interface during a corresponding transmission interval.

At block digits generated in the plurality of transmission intervals may be combined to obtain the multi digit number. The multi wire interface may have N wires and the multi digit number may be expressed as a base 2 1 number. In one example the multi wire interface is a two wire interface and the multi digit number is expressed as a ternary number. In another example the multi wire interface is a three wire interface and the multi digit number is expressed as a septenary number.

At block the multi digit number may be transcoded to obtain received data. A data word may be encoded in the multi digit number.

In some instances an edge may be generated in the receive clock by combining pulses received on the one or more wires into a combination signal providing the combination signal to one shot logic that is configured to produce a fixed duration pulse responsive to an edge in the combination signal and delaying the fixed duration pulse to provide a pulse in the receive clock.

In some examples first information may be decoded from return to zero pulse encoded signals received from a first plurality of wires of the multi wire interface. For example the first information may be encoded in the presence or absence of a pulse on each of the first plurality of wires during a transmission interval. Second information may be decoded from non return to zero signals received from a second plurality of wires of the multi wire interface. Information may be transmitted in signaling states on the second plurality of wires. In one example each wire may carry a signal that has two or more voltage or current states and the second information may be encoded in the combination of signaling states of the second plurality of wires during a transmission interval or transitions in signaling states of the second plurality of wires between successive transmission intervals.

The processor is responsible for general processing including the execution of software stored on the computer readable storage medium . The software when executed by the processor causes the processing circuit to perform the various functions described supra for any particular apparatus. The computer readable storage medium may also be used for storing data that is manipulated by the processor when executing software including data decoded from symbols transmitted over the connectors or wires . The processing circuit further includes at least one of the modules and . The modules and may be software modules running in the processor resident stored in the computer readable storage medium one or more hardware modules coupled to the processor or some combination thereof. The modules and or may include microcontroller instructions state machine configuration parameters or some combination thereof.

In one configuration the apparatus includes modules and or circuits for detecting pulses occurring in one or more signals received from the connectors or wires of a multi wire interface modules and or circuits for providing pulses on a receive clock signal in response to detection of pulses in the one or more signals received from the connectors or wires of the multi wire interface modules and or circuits for capturing a value representative of the presence or absence of a pulse in each wire of the multi wire interface and one or more delay circuits.

In one example the apparatus includes a clock recovery circuit having a plurality of input latches configured to assume a first state when a first pulse is received in one or more of a plurality of input signals combinational logic configured to provide a second pulse response to the first pulse a delay circuit configured to produce a third pulse on a receive clock that is delayed with respect to the second pulse and a plurality of output flip flops configured to capture the first state when triggered by the third pulse where the first state identifies which of the plurality of input signals received input pulses. In some instances a one shot circuit is configured to fix a duration of the second pulse.

The first state may be output as a digit of a multi digit number. The plurality of input signals may be received from a multi wire interface that includes N wires. In one example the multi digit number may be expressed as a base 2 M where M may be selected for processing efficiency reasons and or based on the presence or absence of embedded clock information and or other information in the multi digit number. In one example the plurality of input signals is received from a two wire interface and the multi digit number may be expressed as a ternary number. In another example the plurality of input signals is received from a three wire interface and the multi digit number is expressed as a septenary number.

The plurality of input signals may be received from capacitively coupled or inductively coupled multi wire interfaces. In some instances the plurality of input signals is received from an optical interface.

At block a data word may be transcoded into a multi digit number. Clock information may be embedded in the multi digit number.

At block a combination of pulses may be transmitted over a first plurality of connectors of a multi wire communication link for each transmission interval in a sequence of transmission intervals. Each digit of the multi digit number may define the combination of pulses for a corresponding transmission interval in the sequence of transmission intervals. A pulse may be transmitted on at least one of the plurality of connectors during each transmission interval in the sequence of transmission intervals.

In some instances the combinations of pulses provided to the first plurality of connectors through a capacitive inductive or optical coupling.

The first plurality of connectors includes N connectors and the multi digit number is expressed as a base 2 M where M may be selected for processing efficiency reasons and or based on the presence or absence of embedded clock information and or other information in the multi digit number. In one example the first plurality of connectors may include two connectors and the multi digit number is expressed as a ternary number. In another example the first plurality of connectors includes three connectors and the multi digit number is expressed as a septenary number.

In some examples first information may be encoded in non return to zero pulse encoded signals that is transmitted on the first plurality of connectors of the multi wire interface. For example the first information may be encoded in the presence or absence of a pulse on each of the first plurality of connectors during a transmission interval. Second information may be encoded in one or more non return to zero signals. The one or more non return to zero signals may be transmitted over a second plurality of connectors of the multi wire interface. Information may be transmitted in signaling states of the second plurality of connectors. In one example one or more wires may carry a signal that has two or more voltage or current states and the second information may be encoded in the combination of signaling states of the second plurality of connectors during a transmission interval or transitions in signaling states of the second plurality of connectors between successive transmission intervals.

The processor is responsible for general processing including the execution of software stored on the computer readable storage medium . The software when executed by the processor causes the processing circuit to perform the various functions described supra for any particular apparatus. The computer readable storage medium may also be used for storing data that is manipulated by the processor when executing software including data decoded from symbols transmitted over the connectors or wires . The processing circuit further includes at least one of the modules and . The modules and may be software modules running in the processor resident stored in the computer readable storage medium one or more hardware modules coupled to the processor or some combination thereof. The modules and or may include microcontroller instructions state machine configuration parameters or some combination thereof.

In one configuration the apparatus includes modules and or circuits for transcoding a data word into a multi digit number modules and or circuits for transmitting a pattern of pulses derived from the multi digit number in one or more signals on the connectors or wires of a multi wire communication link and modules and or circuits for coupling the apparatus to the connectors or wires of the multi wire communication link.

In one example the apparatus includes a transcoder that transcodes data words into multi digit numbers that have clock information embedded therein and circuitry configured to provide a combination of pulses for transmission over a plurality of connectors during one transmission interval in a sequence of transmission intervals. The combination of pulses in each transmission interval may be defined by a digit of the multi digit number. A pulse is transmitted on at least one of the plurality of connectors during each transmission interval in the sequence of transmission intervals.

Where the plurality of connectors includes N connectors the multi digit number may be expressed as a base 2 1 number. In one example the plurality of connectors includes two connectors and the multi digit number is expressed as a ternary number. In another example the plurality of connectors includes three connectors and the multi digit number is expressed as a septenary number.

The modules and or circuits for coupling the apparatus to the connectors or wires of the multi wire communication link may include a transmitter configured to capacitively couple the transmitter to the plurality of connectors. The modules and or circuits for coupling the apparatus to the connectors or wires of the multi wire communication link may include a transmitter configured to inductively couple the transmitter to the plurality of connectors. The modules and or circuits for coupling the apparatus to the connectors or wires of the multi wire communication link may include a transmitter configured to optically couple the transmitter to the plurality of connectors.

It is understood that the specific order or hierarchy of steps in the processes disclosed is an illustration of exemplar approaches. Based upon design preferences it is understood that the specific order or hierarchy of steps in the processes may be rearranged. Further some steps may be combined or omitted. The accompanying method claims present elements of the various steps in a sample order and are not meant to be limited to the specific order or hierarchy presented.

The previous description is provided to enable any person skilled in the art to practice the various aspects described herein. Various modifications to these aspects will be readily apparent to those skilled in the art and the generic principles defined herein may be applied to other aspects. Thus the claims are not intended to be limited to the aspects shown herein but is to be accorded the full scope consistent with the language claims wherein reference to an element in the singular is not intended to mean one and only one unless specifically so stated but rather one or more. Unless specifically stated otherwise the term some refers to one or more. All structural and functional equivalents to the elements of the various aspects described throughout this disclosure that are known or later come to be known to those of ordinary skill in the art are expressly incorporated herein by reference and are intended to be encompassed by the claims. Moreover nothing disclosed herein is intended to be dedicated to the public regardless of whether such disclosure is explicitly recited in the claims. No claim element is to be construed as a means plus function unless the element is expressly recited using the phrase means for. 

