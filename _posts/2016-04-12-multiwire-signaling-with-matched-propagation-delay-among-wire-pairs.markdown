---

title: Multi-wire signaling with matched propagation delay among wire pairs
abstract: In a multi-wire channel that includes at least three wires, each unique wire pair of the multi-wire channel has approximately the same signal propagation time. In this way, jitter can be mitigated in the multi-wire channel for signaling where, for a given data transfer, a differential signal is transmitting on a particular pair of the wires and every other wire is floating. In some implementations, matching of the signal propagation times involves providing additional delay for at least one of the wires. The additional delay is provided using passive signal delay techniques and/or active signal delay techniques.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09521058&OS=09521058&RS=09521058
owner: QUALCOMM Incorporated
number: 09521058
owner_city: San Diego
owner_country: US
publication_date: 20160412
---
The present application for patent is a continuation in part of U.S. Non Provisional application Ser. No. 14 315 142 entitled MULTI WIRE SIGNALING WITH MATCHED PROPAGATION DELAY AMONG WIRE PAIRS filed on Jun. 25 2014 now U.S. Pat. No. 9 319 218 which is assigned to the assignee hereof and hereby expressly incorporated by reference herein.

The following relates generally to electrical signaling and more specifically but not exclusively to multi wire signaling.

In some electronic systems signaling between electrical components flows through wires sometimes referred to as traces conductors or electrical paths on or within printed circuit boards PCBs integrated circuits ICs or other structures of the electronic system. Conventionally a signal is carried over a single wire or for a differential signal a pair of wires.

Recently multi wire signaling schemes i.e. signaling over more than two wires have been proposed. For example C PHY is a mobile device communication interface for the Mobile Industry Processor Interface MIPI Alliance Specification. C PHY uses a three phase channel referred to as a trio to transmit data. That is in contrast with conventional physical interfaces PHYs that use a single wire or a differential wire pair for a given channel a C PHY channel employs three wires also referred to as lanes . For a given data transmission e.g. of a bit or symbol two of the wires are used active while the third wire is in a high impedance state e.g. floating . Over a series of data transmissions different pairs of the three wires are used to transmit the data.

Multi wire signaling may be subject to signal transmission issues such as jitter. Jitter is the undesired deviation from true periodicity of an assumed periodic signal in data transmission. For example over a series of symbol transmissions there may be timing skew between the symbols when they are received at a receiver. This skew manifests itself as jitter. In view of the above a need exists for improved circuit techniques for addressing jitter or other similar transmission issues in wire based signaling.

The following summarizes some aspects of the disclosure to provide a basic understanding of such aspects. This summary is not an extensive overview of all contemplated features of the disclosure and is intended neither to identify key or critical elements of all aspects of the disclosure nor to delineate the scope of any or all aspects of the disclosure. Its sole purpose is to present some concepts of one or more aspects of the disclosure in a summary form as a prelude to the more detailed description that is presented later.

Various aspects of the disclosure provide for multi wire signaling where each unique wire pair of the n wires of a multi wire channel has approximately the same signal propagation time e.g. within a threshold margin . Here n is three or more.

In accordance with some aspects of the disclosure matched signal propagation times for different wire pairs are employed in multi wire signaling where different wire pairs are used for different data transmissions. In such a multi wire configuration the distance between one pair of wires can be different from the distance between another pair of wires. Thus a differential signal on one wire pair may travel at a different velocity than a differential signal on the other wire pair resulting in jitter at the receiver. However by matching the signal propagation time for each wire pair in accordance with the teachings herein signal jitter that could otherwise result from this unequal spacing between wire pairs is mitigated.

The disclosure relates in some aspects to providing additional delay for one or more of the wires of a multi wire channel. For example for a multi wire channel employing three wires that are routed side by side additional delay is provided for the outer wires to balance the signal propagation times for the three unique wire pairs of this channel.

In some implementations additional delay is provided for a wire by adapting the physical properties for the wire. For example the wire can have a longer length or shorter length than the other wires. Other physical properties that could be adapted to provide the desired delay include wire width wire thickness dielectric constant and distance to ground plane.

In some implementations additional delay is added for a wire by incorporating a delay element into the signaling path. For example a delay element could be added along the path e.g. along a wire of a PCB or integrated circuit or in an I O circuit e.g. driver or receiver . Such a delay element can be passive e.g. a wire of a specified length or active e.g. employing transistors .

In implementations that employ an active delay element the delay can be dynamically adjusted based on initial design criteria and or based on one or more operating factors. These operating factors can include calibration feedback signal frequency signal rise time signal fall times or path length.

In an aspect of the disclosure an apparatus for multi signaling is provided. The apparatus includes a plurality of wires comprising at least one middle wire a first outer wire located adjacent to one side of the at least one middle wire and a second outer wire located adjacent to another side of the at least one middle wire. The at least one middle wire may include at least two middle wires. The apparatus further includes at least one delay element coupled to at least one of the plurality of wires. The at least one delay element may include a delay element coupled to at least one of the first outer wire or the second outer wire. The at least one delay element provides an amount of signal delay such that a signal propagation time associated with the at least one middle wire is less than a signal propagation time associated with at least one of the first outer wire or the second outer wire and signal propagation times associated with wire pairs of the plurality of wires are equal to one another within a margin of error.

The apparatus also includes a driver circuit coupled to the plurality of wires and configured to for a particular data transfer drive a particular one of the wire pairs of the plurality of wires whereby every other wire of the plurality of wires is in a high impedance state wherein the driver circuit embodies the at least one delay element. The apparatus further includes a receiver circuit coupled to the plurality of wires and configured to decode information for a particular data transfer based on a particular one of the wire pairs of the plurality of wires being driven and every other wire of the plurality of wires being in a high impedance state. The receiver circuit includes at least one differential receiver and the at least one delay element is coupled to an output of the at least one differential receiver.

In an aspect of the disclosure the at least one delay element may be a passive delay structure or an active delay device. In another aspect of the disclosure the at least one delay element may include a wire of a defined length such that an overall length of the at least one middle wire is shorter than a length of the first outer wire and the second outer wire. In a further aspect of the disclosure the at least one delay element includes a programmable delay device. The apparatus may further include a delay controller to generate at least one control signal to control a delay of the at least one delay element.

In a further aspect of the disclosure a method for multi wire signaling includes determining signal propagation times associated with wire pairs of a plurality of wires. The plurality of wires includes at least one middle wire a first outer wire located adjacent to one side of the at least one middle wire and a second outer wire located adjacent to another side of the at least one middle wire. The method further includes specifying a delay for at least one delay element coupled to at least one of the plurality of wires wherein the at least one delay element provides an amount of signal delay such that a signal propagation time associated with the at least one middle wire is less than a signal propagation time associated with at least one of the first outer wire or the second outer wire and the signal propagation times associated with the wire pairs of the plurality of wires are equal to one another within a margin of error. The method also includes driving a particular one of the wire pairs of the plurality of wires for a particular data transfer whereby every other wire of the plurality of wires is in a high impedance state and decoding information for a particular data transfer based on a particular one of the wire pairs of the plurality of wires being driven and every other wire of the plurality of wires being in a high impedance state.

In another aspect of the disclosure an apparatus for multi wire signaling includes a communication interface circuit and a processing circuit. The processing circuit is configured to via the communication interface circuit determine signal propagation times associated with wire pairs of a plurality of wires wherein the plurality of wires includes at least one middle wire a first outer wire located adjacent to one side of the at least one middle wire and a second outer wire located adjacent to another side of the at least one middle wire. The processing circuit is further configured to specify a delay for at least one delay element coupled to at least one of the plurality of wires wherein the at least one delay element provides an amount of signal delay such that a signal propagation time associated with the at least one middle wire is less than a signal propagation time associated with at least one of the first outer wire or the second outer wire and the signal propagation times associated with the wire pairs of the plurality of wires are equal to one another within a margin of error. The processing circuit is also configured to drive a particular one of the wire pairs of the plurality of wires for a particular data transfer whereby every other wire of the plurality of wires is in a high impedance state and decode information for a particular data transfer based on a particular one of the wire pairs of the plurality of wires being driven and every other wire of the plurality of wires being in a high impedance state.

In a further aspect of the disclosure an apparatus for multi wire signaling includes means for determining signal propagation times associated with wire pairs of a plurality of wires the plurality of wires comprising at least one middle wire a first outer wire located adjacent to one side of the at least one middle wire and a second outer wire located adjacent to another side of the at least one middle wire. The apparatus further includes means for specifying a delay for at least one delay element coupled to at least one of the plurality of wires wherein the at least one delay element provides an amount of signal delay such that a signal propagation time associated with the at least one middle wire is less than a signal propagation time associated with at least one of the first outer wire or the second outer wire and the signal propagation times associated with the wire pairs of the plurality of wires are equal to one another within a margin of error. The apparatus also includes means for driving a particular one of the wire pairs of the plurality of wires for a particular data transfer whereby every other wire of the plurality of wires is in a high impedance state and means for decoding information for a particular data transfer based on a particular one of the wire pairs of the plurality of wires being driven and every other wire of the plurality of wires being in a high impedance state.

These and other aspects of the disclosure will become more fully understood upon a review of the detailed description which follows. Other aspects features and implementations of the disclosure will become apparent to those of ordinary skill in the art upon reviewing the following description of specific exemplary implementations of the disclosure in conjunction with the accompanying figures. While features of the disclosure may be discussed relative to certain implementations and figures below all implementations of the disclosure can include one or more of the advantageous features discussed herein. In other words while one or more implementations may be discussed as having certain advantageous features one or more of such features may also be used in accordance with the various implementations of the disclosure discussed herein. In similar fashion while exemplary implementations may be discussed below as device system or method implementations it should be understood that such exemplary implementations can be implemented in various devices systems and methods.

The detailed description set forth below in connection with the appended drawings is intended as a description of various configurations and is not intended to represent the only configurations in which the concepts described herein may be practiced. The detailed description includes specific details for the purpose of providing a thorough understanding of various concepts. However it will be apparent to those skilled in the art that these concepts may be practiced without these specific details. In some instances well known structures and components are shown in block diagram form in order to avoid obscuring such concepts.

For purposes of illustration various aspects of the disclosure will be discussed in the context of a multi wire channel that employs three wires. However the teachings herein are also applicable to multi wire channels that have more than three wires. For convenience a multi wire channel may be referred to herein as an n wire channel where n represents three or more.

The first second and third wires and are each terminated at the receiver by a first termination resistor a second termination resistor and a third termination resistor respectively coupled to a common mode voltage Vcm.

Conventionally the signal propagation time of a wire is calculated based on the length of the wire and other characteristics associated with the wire. For example the characteristic impedance and the termination resistance of a wire affects the signal propagation times of signals traveling through the wire to some extent. For differential transmissions precise system timing is maintained by ensuring that the signal propagation times of each wire of the wire pair are equal. In this way both rails of the differential signal will be received at the receiver at the same time thereby enabling the receiver to sample a received symbol over a relatively wide timing window.

In contrast in a multi wire channel the conventional approach of ensuring that the signal propagation times for all wires of a channel are equal leads to less than optimal signaling. This issue will be described in detail with further reference to and reference to .

In a three wire channel for a given data transfer e.g. of a symbol or bit the transmitter drives two of the wires and leaves the remaining wire in a high impedance state e.g. floating . For the next data transfer the transmitter again drives two of the wires and leaves the remaining wire in a high impedance state. However the pair of wires used for any subsequent data transfer may be different from or the same as the pair of wires used for a previous data transfer. Through the use of such a multi wire signaling scheme improved data rates and or transmission quality may be achieved as compared to a channel that employs a single wire or a differential pair.

Using the designations A B and C to refer to the first wire the second wire and the third wire of a given transmission over the channel can involve wire pair A B being driven wire pair B C being driven or wire pair A C being driven. As discussed in more detail below in conjunction with the transmitter can encode data to be transmitted based on which wire pair is used for a given data transfer and any changes in the wire pair used from one data transfer to the next. For example a transfer over wire pair A B followed by a transfer over wire pair B C can represent a certain value e.g. binary 01 . The receiver in turn is configured to properly interpret signals encoded in this manner and thereby decode the original data that was transmitted.

In practice the different wire pairs A B B C and A C may have different transmission characteristics. For example the signal propagation time of one wire pair may be different from the signal propagation time of another wire pair. This difference may be due at least in part to the physical properties of the wires.

In some implementations the wires A B and C are conductive paths on a printed circuit board PCB and run parallel with one another into the page in the example of . Thus the view of correlates in some aspects to the view of although is simply in the form a block diagram and not an actual circuit . The wires A B and C can be implemented in other ways in other implementations. For example in some implementations the wires A B and C are conductive paths on an integrated circuit IC die.

As indicated in the distance from the wire A to the wire B is 100 um. Similarly the distance from the wire B to the wire C is 100 um. However the distance from the wire A to the wire C is 300 um. Since the signal propagation time of a differential signal traveling over a wire pair depends at least in part on the distance between the wires a differential signal traveling over the wire pair A B has a different i.e. shorter signal propagation time than a differential signal traveling over the wire pair A C.

In more detail an approximation for the signal propagation time or delay through a transmission line e.g. wire A wire B or wire C may be determined by the following formula Delay square root over L L C C wherein Lis an inductance of a current line Lis a mutual inductance between the current line and a neighboring line paired with the current line in a wire pair Cis a capacitance of the current line and Cis a mutual capacitance between the current line and the neighboring line in the wire pair. The terms may be dependent on geometry and the nature of the excitation on the current line as well as neighboring lines.

In an aspect of the disclosure a value of Lis roughly equal for all lines e.g. wire A wire B and wire C . However Lmay have a larger value when transmitting a differential signal over a wire pair including an inner line e.g. wire B because of the closer spacing between the inner line and either of the outer lines e.g. either wire A or wire C and hence higher mutual coupling. Thus the value of L L may be smaller when transmitting the differential signal over the wire pair including the inner line. Similarly a value of Cis roughly equal for all lines e.g. wire A wire B and wire C . However Cmay have a larger value when transmitting the differential signal over the wire pair including the inner line e.g. wire B because of the closer spacing between the inner line and either of the outer lines e.g. either wire A or wire C . Thus the value of C C may be larger when transmitting the differential signal over the wire pair including the inner line.

As noted above the delay of a current line is determined by the square root of the product of two terms L L and C C . With respect to the inner line e.g. wire B a first term L L is smaller in value while a second term C C is larger in value. Depending on the transmission line configuration the product of the two terms and hence the value of the delay on the inner line may vary can be larger or smaller than the delay value of an outer line . In an aspect of the disclosure a product of the two terms for the inner line e.g. wire B is ensured to match a product of the two terms for an outer line e.g. wire A or wire C .

In some examples the signal propagation time or delay through the inner line is smaller in value. This may be attributed to the inner line having a first term L L that is smaller in value that overcomes the inner line having a second term C C that is higher in value. In an aspect of the disclosure the delay through the inner line being smaller in value may be compensated for by increasing the length or increasing the delay of the inner line so that the capacitance and inductance and consequently the delay of the inner line increases. An exact amount of the length or delay to be added may be determined by electromagnetic simulation on the specific geometry of the transmission lines.

In other examples the signal propagation time or delay through the inner line is larger in value. This may be attributed to the inner line having a second term C C that is higher in value that overcomes a first term L L that is smaller in value. In an aspect of the disclosure the delay through the inner line being larger in value may be compensated for by decreasing the length or decreasing the delay of the inner line so that the capacitance and inductance and consequently the delay of the inner line decreases. An exact amount of the length or delay to be subtracted may be determined by electromagnetic simulation on the specific geometry of the transmission lines.

Keeping in mind that different wire pairs are used over a series of data transfers in a multi wire channel the symbols or bits transmitted over different wire pairs may arrive at the receiver at different times relative to the receive clock. In other words signals transmitted via a conventional multi wire channel may be subject to jitter. Referring to a differential signal on the wire pair A C will travel at a slower velocity than a differential signal on the wire pair A B. Consequently at the receiver there will be timing skew between the signals transmitted on the different pairs. Over a series of data transmissions using the different wire pairs this skew manifests itself as jitter.

In the eye pattern it may be seen that some of the transitions from one voltage level to another occur later than others. The width of these transitions collectively is indicative of the jitter. For example in this case the jitter may be on the order of 160 picoseconds ps .

In general it is desirable to reduce the amount of jitter present in a communication system. By reducing jitter timing margins for the system can be improved since symbols can be sampled over a wider window of time when jitter is low as opposed to when jitter is high.

The disclosure relates in some aspects to mitigating jitter and related timing issues in multi wire signaling. Jitter is mitigated by ensuring that each unique wire pair of the n wires in an n wire channel has approximately the same signal propagation time within a threshold margin e.g. within a margin of error .

In some aspects this is achieved by adding delay to at least one of the wires. For example in a 3 wire system jitter can be reduced by incorporating additional delay i.e. positive delay on the center wire of the trio. Thus to make the signal propagation time of each wire pair approximately equal e.g. the propagation delay is the same for the wire pairs A B B C and A C the signal propagation time of the individual wires is made unequal e.g. by adding delay to one of more of the individual wires .

In general delay may be added anywhere along a wire to achieve the desired balancing of the signal propagation times between wire pairs. For example illustrates a communication system including three wire transmitter and a three wire receiver where a first delay element can be incorporated into the transmitter a second delay element can be incorporated into the communication medium between the transmitter and the receiver or a third delay element can be incorporated into the receiver . Here the dashed boxes for the first through third delay elements represent that each delay element is optional. That is one or more of the first through third delay elements could be used in a given implementation.

In the three wires driven by the transmitter are designated as TXA TXB and TXC e.g. corresponding to the wires A B and C of . Similarly the three wires over which signals are received by the receiver are designated as RXA RXB and RXC e.g. again corresponding to the wires A B and C of .

In implementations that employ the first delay element signals carried by the middle wire TXB are delayed by the delay element . The signal carried by the wire TXA the delayed signal carried by the wire TXB and the signal carried by the wire TXC are coupled to a first driver a second driver and a third driver respectively that drive a first wire a second wire and a third wire of an external bus.

In implementations that employ the second delay element signals carried by the second wire are delayed by the delay element . The signal carried by the first wire the delayed signal carried by the second wire and the signal carried by the third wire are coupled to a first receiver circuit a second receiver circuit and a third receiver circuit respectively of the receiver.

In implementations that employ the third delay element signals output by the second receiver circuit are delayed by the delay element . Thus the signal driven by the first receiver circuit the delayed signal driven by the second receiver circuit and the signal driven by the third receiver circuit are coupled to an input latch of the receiver .

In the example of the signal propagation time of interest for a given wire corresponds to the time that a signal on the wire is clocked out of an output latch at the transmitter according to a transmit clock TX CLK to the time the signal is clocked into the input latch at the receiver according to a receive clock RX CLK . Thus in this case a delay element can be incorporated anywhere along the path of a wire between the output latch and the input latch . The delay element may be a stand alone component or embodied in another component. As an example of the latter case a delay element can be embodied in an input output I O circuit such as a driver or receiver circuit.

Table 1 lists several examples of the jitter that results when other delay values are used in the simulation. As indicated the delay of 40 ps results in the lowest jitter in this scenario.

A delay element may take different forms in different implementations. For example some implementations employ passive delay elements while other implementations employ active delay elements.

Examples of passive delay elements include without limitation a wire of a defined length and a delay line in the form of a coil of wire of a defined length. A passive delay line also may include capacitors inductors or other passive components. In some implementations a delay element consists of a wire segment that is incorporated into the path of a wire to increase the length of the wire.

Thus in some implementations delay is provided for a wire by defining the physical properties of the wire e.g. during the design stage . For example one wire can be configured to have a longer length than another wire. Other physical properties that could be adapted to provide a desired delay include the width of the wire the thickness of the wire a dielectric constant of a dielectric upon which the wire rests and the distance from the wire to a ground plane.

Examples of active delay elements include without limitation fixed delay lines that include active circuitry e.g. transistors and programmable delay devices. Thus in some implementations a delay element may be adjustable so that the delay imparted on a wire can be changed in the face of changes in operating conditions.

In implementations that employ an active delay element the delay can be dynamically adjusted based on initial design criteria and or based on one or more operating factors. These operating factors may include without limitation calibration feedback signal frequency signal rise fall times or path length.

The memory device includes a delay table having a list of delay values or indications thereof to be used by the programmable delay circuit during certain operating conditions. For example the delay table can list the delay values to be used for particular data transfer rates PVT process voltage and temperature conditions wire lengths signal propagation times applications and so on. The delay table can be generated for example based on empirical studies or based on simulations that identify the optimal delay for each corresponding condition. Accordingly for a given operating condition or configuration the delay controller can select the appropriate delay value from the delay table .

In some aspects the applications referred to above relate to the type of peer device e.g. a memory device a processor an I O device etc. that is receiving or transmitting data over a multi wire channel. Here different applications may correspond to different operating conditions e.g. data rates signal propagation times or wire lengths that affect how the delay is to be set. Other types of applications could be used to specify desired delay values in other implementations.

The memory device includes parameters to be used by the delay controller to determine a delay value. For example the parameters can list the current data transfer rates PVT process voltage and temperature conditions wire lengths signal propagation times applications and so on for a multi wire system that is controlled by the delay controller . In this case for a given operating condition or configuration the delay controller can determine e.g. calculate using a designated algorithm the appropriate delay value to be used based on the parameters . The parameters can be stored in the memory device for example during system initialization in the case of static parameters e.g. wire length or during active operations in the case of dynamic parameters. As an example of the latter case a component e.g. a sensor a processing circuit a timing controller etc. of a multi wire system controlled by the delay controller can generate the parameters e.g. current data rate temperature etc. and store the parameters in the memory device .

In some implementations an active operation directly sends the information about a current operating condition to the delay controller . For example a component e.g. a sensor a processing circuit a timing controller etc. of a multi wire system controlled by the delay controller can generate an indication of an operating condition e.g. current data rate temperature etc. and send the indication to the delay controller . As discussed above the delay controller can then determine an appropriate delay value to be used given the current operating conditions.

A calibration mechanism can also be employed to determine a delay value. illustrates a communication system where a transmitter sends data to a receiver via a multi wire channel . A data processor processes input data to generate data transmitted via the multi wire channel . As discussed herein one of the wires includes a delay element that is controlled by a delay controller .

At the receiver a data processor processes data received via the multi wire channel to provide output data . In addition the data processor provides information relating to the received data e.g. the data itself or some characteristic of the data to a feedback controller . Based on the information the feedback controller sends feedback to the delay controller that the delay controller uses to generate a control signal for controlling the delay element .

In some implementations the feedback controller provides a loopback function. For example during a calibration operation the data processor may send a series of patterns over the multi wire channel . Through the use of appropriate patterns the signal propagation times on the multi wire channel can be estimated. For example patterns sent a relatively high rate may be received with more errors if the jitter associated with the corresponding received signal is high. Consequently the delay controller can compare the data that was received by the receiver as fed back through the feedback with the data sent by the transmitter to determine the error rate. To this end the data processor can send calibration information e.g. calibration data patterns to the delay controller . The delay controller can then adjust the delay value during the calibration operation to determine the delay value that results in the lowest error rate.

A calibration scheme also can be employed at a receiver. illustrates a receiver that receives data via a multi wire channel . As discussed herein one of the wires includes a delay element that is controlled by a delay controller . A data processor processes the received data to provide output data . In addition the data processor provides information relating to the received data e.g. the data itself or some characteristic of the data to a feedback controller . Based on the information the feedback controller sends feedback to the delay controller that the delay controller uses to generate a control signal for controlling the delay element .

In some implementations the feedback controller provides a loopback function. Thus during a calibration operation a transmitter not shown may send a series of patterns over the multi wire channel . In this case corresponding calibration information e.g. the data patterns may have been previously provided to the receiver . Consequently the delay controller can compare the data that was received by the receiver as fed back through the feedback with the calibration information . Again the delay controller can adjust the delay value during the calibration operation to determine the delay value that results in the lowest error rate.

In the previous figures delay is illustrated as being imparted on a single wire. In practice delay may be imparted on multiple wires. For example different delays may be imparted on different wires so that one or more of the wires has a longer signal propagation time as compared to at least one other one of the wires. In this way the signal propagation times of each of the corresponding wire pairs can be matched in accordance with the teachings herein. illustrate a transmitter and a receiver respectively each of which employs multiple delay elements.

In signals on a first wire are delayed by a first delay element signals on a second wire are delayed by a second delay element and signals on a third wire are delayed by a third delay element . In this case a delay controller generates several control signals that individually control the delay in a given one of the first second or third delay elements or .

In signals on a first wire are delayed by a first delay element signals on a second wire are delayed by a second delay element and signals on a third wire are delayed by a third delay element . In this case a delay controller generates several control signals that individually control the delay in a given one of the first second or third delay elements or .

As mentioned above the teachings herein are applicable to multi wire channels that employ more than three wires. illustrates an example of a four wire channel . A transmitter sends data to a receiver via a first wire a second wire a third wire and a fourth wire . The characteristic impedance of each of the first second third and fourth wires and is represented by a first characteristic impedance a second characteristic impedance and a third characteristic impedance and a fourth characteristic impedance respectively. The first second third and fourth wires and are each terminated at the receiver by a first termination resistor a second termination resistor a third termination resistor and a fourth termination resistor respectively coupled to a common mode voltage Vcm.

In a four wire channel for a given data transfer e.g. of a symbol or bit the transmitter drives two of the wires and leaves the remaining two wires in a high impedance state e.g. floating . For the next data transfer the transmitter again drives two of the wires and leaves the remaining wires in a high impedance state. As with a three wire channel the pair of wires used for any subsequent data transfer may be different from or the same as the pair of wires used for a previous data transfer.

Using the designations A B C and D to refer to the first wire the second wire the third wire and the fourth wire a given transmission over the channel can involve wire pair A B being driven wire pair A C being driven wire pair A D being driven wire pair B C being driven wire pair B D being driven or wire pair C D being driven. Thus due to the larger number of potential combinations it may be seen that more information can be transmitted over a four wire channel as compared to a three wire channel.

Again however the different wire pairs may have different transmission characteristics. For example the signal propagation time of one wire pair may be different from the signal propagation time of another wire pair due to the different distances that may exist between the corresponding wires for each of the wire pairs. For example it should be appreciated that for four wires routed in parallel on a substrate the wire pair consisting of the two outer wires will be even further apart than in the three wire example of . Thus jitter may be even more pronounced in this case.

It should be appreciated that jitter issues exists for the general n wire scenario where n is three or more. illustrates an example of an n wire channel . A transmitter sends data to a receiver via a first wire a second wire and any other wires up to an n th wire .

In the n wire channel for a given data transfer e.g. of a symbol or bit the transmitter drives two of the wires and leaves the remaining wires in a high impedance state e.g. floating . The pair of wires used for any subsequent data transfer may be different from or the same as the pair of wires used for a previous data transfer. Again the signal propagation time of one wire pair may be different from the signal propagation time of another wire pair due to the different distances that may exist between the corresponding wires for each of the wire pairs. Thus jitter may be a significant issue in an n wire channel.

The techniques described herein can be generally extended to the n channel scenario. As illustrated in the communication system of a delay element can be incorporated into any of the n wires at any appropriate location along each wire. By adding delay to one or more wires the signal propagation times for each wire pair can be matched. For example in the absence of an empirical model that precisely describes which wire should be delay and the extent of that delay e.g. for higher orders of n a trial and error algorithm or a regression based algorithm may be employed to identify these parameters.

The circuit of includes wires and . The center wires and are longer than the two outer wires and . In this case the center wires and are of the same length but the center wire has a different length. The two outer wires and have the same length.

The circuit of includes wires and . The center wires and are longer than the two outer wires and . In this case the center wires and are of the same length but the center wire has a different length. The two outer wires and have the same length.

The circuit of includes wires and . The center wires and are longer than the two outer wires and . In this case all of the center wires and are of the same length. The two outer wires and have the same length.

As mentioned above a variety of characteristics may be adjusted to control the signal propagation time associated with wire pairs in a multi wire channel. illustrate several of these characteristics.

In practice routing all wires in the precise manner of at the circuit design stage may be difficult due to routing constraints. However such an approach may be employed for at least for a portion of a wire path whereby the other techniques described herein are used to add any additional delay that may be desired. Advantageously such a combined approach may reduce the amount of delay that needs to be added to a wire since the timing skews on wires that are at least partially balanced can be expected to be lower.

The signal propagation time associated with a set of wires also depends at least in part on the spacing between the wires. Accordingly the spacing between two or more wires may be controlled to add delay to a given wire. Furthermore the other techniques described herein may be used in conjunction with wire spacing to add any additional delay that may be desired.

Referring now to additional details of multi wire signaling will be described in the context of a three wire channel e.g. for C PHY .

At a receiver three OP amps are coupled to the wires A B and C to decode the received symbol information. A first OP amp generates a signal R AB indicative of the difference between the wires A and B. A second OP amp generates a signal R BC indicative of the difference between the wires B and C. A third OP amp generates a signal R CA indicative of the difference between the wires C and A.

In the signal propagation times of interest corresponds to the wire path from the switches to the inputs of the OP amps. Thus a delay element as taught herein may be incorporated into any section of these paths.

A more detailed driver circuit is shown in . In general the pull up control signals PUA PUB and PUC correspond to the pull up control signals pua pub and puc of . Similarly the pull down control signals PDA PDB and PDC generally correspond to the pull down control signals pda pdb and pdc of .

In some aspects the driver circuit is similar to a conventional self series terminated SST driver. Compared to the system of an extra series resistor branch controlled by control signals PM A B C is added to maintain the mid level wire output impedance at 50 ohms. Irrespective of the impedance of any switch MOSFETs R 2N is set equal to 50 ohm for impedance matching.

The use of such a signaling scheme will be described in more detail in conjunction with the system level description provided in .

In a system illustrates transmitter components channel components and receiver components associated with a sample implementation of a three wire channel. An encoder encodes C PHY data and sends the encoded data to a pre driver . The pre driven signals are driven onto an external bus by driver I O circuits and . Corresponding pad capacitances Cp are indicated for each wire of the external bus. Delays D D and D correspond to propagation delay times for wires A B and C respectively of the three wire channel. An additional PCB delay corresponding to the delay imparted on the wires A B and C implemented in a PCB is also represented. At the receive section corresponding pad capacitances Cp are again indicated for each wire of the bus as well as the termination resistors and common capacitance Ccomm for the termination circuit. Drivers and correspond to the respective OP amps and of . A clock generator derives a clock signal RSYM CLK from the signals output by the drivers and . A decoder then generates signals POLARITY PHASE AND SAME PHASE corresponding to the C PHY data transmitted by the transmit side. illustrate example of a transmit side and a receive side respectively of the system in more detail.

When N Phase polarity encoding is used connectors such as signal wires and on an M wire bus may be undriven driven positive or driven negative. An undriven signal wire or may be in a high impedance state. An undriven signal wire or may be driven to a voltage level that lies substantially halfway between the positive and negative voltage levels provided on driven signal wires. An undriven signal wire or may have no current flowing through it. In the example illustrated in each signal wire and may be in one of three states denoted as 1 1 and 0 using drivers . In one example drivers may include unit level current mode drivers. In another example drivers may drive opposite polarity voltages on two signal wires and while the third signal wire is at high impedance and or pulled to ground. For each transmitted symbol interval at least one signal is in the undriven 0 state while the number of signals driven positive 1 state is equal to the number of signals driven negative 1 state such that the sum of current flowing to the receiver is always zero. For each pair of consecutive symbol transmission intervals at least one signal wire or has a different state in the two symbol transmission intervals.

In the example depicted in 16 bit data is input to a mapper which maps the input data to 7 symbols for transmitting sequentially over the signal wires and . The 7 symbols may be serialized using parallel to serial converters for example. An M wire N Phase encoder receives 7 symbols produced by the mapper one symbol at a time and computes the state of each signal wire and for each symbol interval. The encoder selects the states of the signal wires and based on the input symbol and the previous states of signal wires and

The use of M wire N Phase encoding permits a number of bits to be encoded in a plurality of symbols where the bits per symbol is not an integer. In the simple example of a 3 wire system there are 3 available combinations of 2 wires that may be driven simultaneously and 2 possible combinations of polarity on the pair of simultaneously driven wires yielding 6 possible states. Since each transition occurs from a current state 5 of the 6 states are available at every transition. The state of at least one wire is required to change at each transition. With 5 states log 5 2.32 bits may be encoded per symbol. Accordingly a mapper may accept a 16 bit word and convert it to 7 symbols because 7 symbols carrying 2.32 bits per symbol can encode 16.24 bits. In other words a combination of seven symbols that encodes five states has 5 78 125 permutations. Accordingly the 7 symbols may be used to encode the 2 65 536 permutations of 16 bits.

At any Phase state in the illustrated three wire example exactly two of the wires carry a signal which is effectively a differential signal for that Phase state while the third wire or is undriven. The Phase state for each wire may be determined by voltage difference between the wire or and at least one other wire and or or by the direction of current flow or lack of current flow in the wire or . As shown in the state transition diagram three Phase states S Sand S are defined. A signal may flow clockwise from Phase state Sto Phase state S Phase state Sto Phase state S and or Phase state Sto Phase state Sand the signal may flow counter clockwise from Phase state Sto Phase state S Phase state Sto Phase state S and or Phase state Sto Phase state S. For other values of N transitions between the N states may optionally be defined according to a corresponding state diagram to obtain circular rotation between state transitions.

In the example of a three wire 3 Phase communications link clockwise rotations Sto S Sto S and or Sto S at a state transition may be used to encode a logic 1 while counter clockwise rotations Sto S Sto S and or Sto S at the state transition may be used to encode a logic 0. Accordingly a bit may be encoded at each transition by controlling whether the signal is rotating clockwise or counter clockwise. For example a logic 1 may be encoded when the three wires transition from Phase state Sto Phase state Sand a logic 0 may be encoded when the three wires transition from Phase state Sto Phase state S. In the simple three wire example depicted direction of rotation may be easily determined based on which of the three wires is undriven before and after the transition.

Information may also be encoded in the polarity of the driven wires or direction of current flow between two wires . Signals and illustrate voltage levels applied to wires respectively at each Phase state in a three wire 3 Phase link. At any time a first wire is coupled to a positive voltage V for example a second wire is coupled to a negative voltage V for example while the third wire may be open circuited or otherwise undriven. As such one polarity encoding state may be determined by the current flow between the first and second wires or the voltage polarities of the first and second wires . In some embodiments two bits of data may be encoded at each Phase transition . A decoder may determine the direction of signal Phase rotation to obtain the first bit and the second bit may be determined based on the polarity difference between two of the signals and . The decoder having determined direction of rotation can determine the current Phase state and the polarity of the voltage applied between the two active wires and or or the direction of current flow through the two active wires and or

In the example of the three wire 3 Phase link described herein one bit of data may be encoded in the rotation or Phase change in the three wire 3 Phase link and an additional bit may be encoded in the polarity of two driven wires. Certain embodiments encode more than two bits in each transition of a three wire 3 Phase encoding system by allowing transition to any of the possible states from a current state. Given three rotational Phases and two polarities for each Phase 6 states are defined such that 5 states are available from any current state. Accordingly there may be log 5 2.32 bits per symbol transition and the mapper may accept a 16 bit word and convert it to 7 symbols.

Certain aspects may be applicable to communications links deployed between electronic components which may include subcomponents of devices such as telephones mobile computing devices appliances automobile electronics avionics systems etc. Referring to for example an apparatus employing M wire N Phase encoding may include a processing circuit that is configured to control operation of the apparatus . The processing circuit may access and execute software applications and control logic circuits and other devices within the apparatus . In one example the apparatus may include a communication device that communicates through an RF communications transceiver with a radio access network RAN a core access network the Internet and or another network. The communications transceiver may be operably coupled to a processing circuit . The processing circuit may include one or more IC devices such as an application specific IC ASIC . The ASIC may include one or more processing devices logic circuits and so on. The processing circuit may include and or be coupled to processor readable storage that may maintain instructions and data may be executed by processing circuit . The processing circuit may be controlled by one or more of an operating system and an application programming interface API layer that supports and enables execution of software modules residing in the storage of the device. The storage may include read only memory ROM or random access memory RAM electrically erasable programmable read only memory EEPROM a flash memory device or any memory device that can be used in processing systems and computing platforms. The processing circuit may include and or access a local database that can maintain operational parameters and other information used to configure and operate the apparatus . The local database may be implemented using one or more of a database module or server flash memory magnetic media EEPROM optical media tape soft or hard disk or the like. The processing circuit may also be operably coupled to external devices such as an antenna a display operator controls such as a button and a keypad among other components.

The communications link may include multiple channels and . One or more channel may be bidirectional and may operate in half duplex mode and or full duplex mode. One or more channels may be unidirectional. The communications link may be asymmetrical providing higher bandwidth in one direction. In one example described herein a first communications channel may be referred to as a forward link while a second communications channel may be referred to as a reverse link . The first IC device may be designated as a host master and or transmitter while the second IC device may be designated as a client slave and or receiver even if both IC devices and are configured to transmit and receive on the communications link . In one example the forward link may operate at a higher data rate when communicating data from a first IC device to a second IC device while the reverse link may operate at a lower data rate when communicating data from the second IC device to the first IC device .

The IC devices and may each include a processor or other processing and or computing circuit or device . In one example the first IC device may perform core functions of the apparatus including maintaining communications through a transceiver and an antenna while the second IC device may support a user interface that manages or operates a display controller and may control operations of a camera or video input device using a camera controller . Other features supported by one or more of the IC devices and may include a keyboard a voice recognition component and other input or output devices. The display controller may include circuits and software drivers that support a display such as a liquid crystal display LCD panel a touch screen display an indicator and so on. The storage media and may include transitory and or non transitory storage devices adapted to maintain instructions and data used by the respective processing circuits and and or other components of the IC devices and . Communication between each processing circuit and its corresponding storage media and and other modules and circuits may be facilitated by one or more buses and respectively.

The reverse link may be operated in the same manner as the forward link . The forward link and the reverse link may be capable of transmitting at comparable speeds or at different speeds where speed may be expressed as a data transfer rate and or a clocking rate. The forward and reverse data rates may be substantially the same or may differ by orders of magnitude depending on the application. In some applications a single bidirectional link may support communications between the first IC device and the second IC device . The forward link and or the reverse link may be configurable to operate in a bidirectional mode when for example the forward and reverse links and share the same physical connections and operate in a half duplex manner.

In certain examples the reverse link derives a clocking signal from the forward link for synchronization purposes for control purposes to facilitate power management and or for simplicity of design. The clocking signal may have a frequency that is obtained by dividing the frequency of a symbol clock used to transmit signals on the forward link . The symbol clock may be superimposed or otherwise encoded in symbols transmitted on the forward link . The use of a clocking signal that is a derivative of the symbol clock allows fast synchronization of transmitters and receivers transceivers and enables fast start and stop of data signals without the need for framing to enable training and synchronization.

In certain examples a single bidirectional link may support communications between first processing device and the second processing device . In some instances the first processing device and the second processing device provide encoding and decoding of data address and control signals transmitted between a processing device and memory devices such as dynamic random access memory DRAM .

In one example one or more of buses and or may provide access to double data rate DDR SDRAM using M wire N Phase encoding technique. N Phase polarity encoding devices and or can encode multiple bits per transition and multiple sets of wires can be used to transmit and receive data from the SDRAM control signals address signals and so on.

In another example the communication link includes a high speed digital interface such as a mobile display digital interface MDDI and one or more data links and may use N Phase polarity encoding. Transceivers and may encode and decode data transmitted on the communications link . The use of N Phase polarity encoding provides for high speed data transfer and may consume half or less of the power of other interfaces because fewer drivers are active in N Phase polarity encoded data links . N Phase polarity encoding devices and or can encode multiple bits per transition on the interface which may include a bus. In one example a combination of 3 Phase and polarity encoding may be used to support a wide video graphics array WVGA 80 frames per second LCD driver IC without a frame buffer delivering pixel data at 810 Mbps for display refresh.

According to certain aspects disclosed herein characteristics of an M wire N Phase polarity communications link may be dynamically modified to accommodate changing operational requirements and circumstances. For example the number of wires used to transmit an N Phase signal may be increased to obtain a higher available bandwidth and or the number of wires used to transmit an N Phase signal may be decreased to reduce power consumption by the IC devices and . The number of wires used to transmit an N Phase signal in one direction may be adapted independently of the number of wires used to transmit an N Phase signal in the other direction. Receiving circuits and transmitting circuits in the physical layer drivers and may be configured using control information transmitted when the communications link is activated after hibernation or power on. The control information may be transmitted according to a predefined protocol whereby a minimum number of wires are activated to carry a control message specifying the configuration of the communications link for example. The control message may alternatively or additionally be transmitted with a shutdown command a wakeup command and or in a preamble preceding each transmission. In some examples the configuration of the communications link may be determined during a training and or synchronization sequence whereby the receiving physical layer drivers or monitors the available wires or other conductors for transitions corresponding to an N Phase signal in order to determine which wires are active.

The computer includes a processor and a memory . The processor may be any suitable type of processing unit such as a central processing unit CPU a co processor an arithmetic processing unit a graphics processing unit GPU a digital signal processor DSP etc. The memory may include any suitable type of memory technology such a RAM ROM FLASH disk drives and the like.

A routing program and simulation models stored in the memory and or implemented by the processor enable a user to generate circuit designs in accordance with the teachings herein. For example a user may use the display device and the user input devices to position circuit components on at least one substrate e.g. of an IC or a PCB route wires between the circuit components and add delay as taught herein. The user may then send a circuit design to the fabrication system to produce the desired circuit component.

Turning now to a block diagram is shown illustrating select components of an apparatus according to at least one example of the disclosure. The apparatus includes an external bus interface a storage medium a user interface a memory device and a processing circuit . The processing circuit is coupled to or placed in electrical communication with each of the external bus interface the storage medium the user interface and the memory device .

The external bus interface provides an interface for the components of the apparatus to an external bus . The external bus interface may include for example one or more of signal driver circuits signal receiver circuits amplifiers signal filters signal buffers or other circuitry used to interface with a signaling bus or other types of signaling media.

The processing circuit is arranged to obtain process and or send data control data access and storage issue commands and control other desired operations. The processing circuit may include circuitry adapted to implement desired programming provided by appropriate media in at least one example. In some instances the processing circuit may include circuitry adapted to perform a desired function with or without implementing programming. By way of example the processing circuit may be implemented as one or more processors one or more controllers and or other structure configured to execute executable programming and or perform a desired function. Examples of the processing circuit may include a general purpose processor a digital signal processor DSP an application specific integrated circuit ASIC a field programmable gate array FPGA or other programmable logic component discrete gate or transistor logic discrete hardware components or any combination thereof designed to perform the functions described herein. A general purpose processor may include a microprocessor as well as any conventional processor controller microcontroller or state machine. The processing circuit may also be implemented as a combination of computing components such as a combination of a DSP and a microprocessor a number of microprocessors one or more microprocessors in conjunction with a DSP core an ASIC and a microprocessor or any other number of varying configurations. These examples of the processing circuit are for illustration and other suitable configurations within the scope of the disclosure are also contemplated.

The processing circuit is adapted for processing including the execution of programming which may be stored on the storage medium . As used herein the terms programming or instructions shall be construed broadly to include without limitation instruction sets instructions code code segments program code programs programming subprograms software modules applications software applications software packages routines subroutines objects executables threads of execution procedures functions etc. whether referred to as software firmware middleware microcode hardware description language or otherwise.

In some instances the processing circuit may include one or more of a circuit module for determining signal propagation times a circuit module for specifying a delay a circuit module for determining a parameter a circuit module for driving or a circuit module for decoding .

The circuit module for determining signal propagation times may include circuitry and or programming e.g. a circuit module for determining signal propagation times stored on the storage medium adapted to collect information about signal propagation times. For example in some implementations the information is retrieved from the memory device or collected by activating a process that estimates or measures signal propagation times. An indication of the signal propagation times is then output e.g. stored in the memory device or passed to another component .

The circuit module for specifying a delay may include circuitry and or programming e.g. a circuit module for specifying a delay stored on the storage medium adapted to acquire information used to specify a delay. For example in some implementations the information is retrieved from the memory device e.g. the memory device of or from an active process e.g. the active operations of . A delay value is then determined based on the information e.g. as discussed above in conjunction for the delay controller of . An indication of the delay is then output e.g. stored in the memory device or passed to another component .

The circuit module for determining a parameter may include circuitry and or programming e.g. a circuit module for determining a parameter stored on the storage medium adapted to acquire parameter information. For example in some implementations the information is retrieved from the memory device e.g. the memory device of or from an active process e.g. the active operations of .

The circuit module for driving may include circuitry and or programming e.g. a circuit module for driving stored on the storage medium adapted to cause data to be driven onto a multi wire channel. For example in some implementations information to be sent over a channel is obtained and the information is sent to a driver circuit.

The circuit module for decoding may include circuitry and or programming e.g. a circuit module for decoding stored on the storage medium adapted to decode information received via a multi wire channel. For example in some implementations received information is decoded by comparing the signal received on different wires e.g. as in .

The storage medium may represent one or more processor readable devices for storing programming electronic data databases or other digital information. The storage medium may also be used for storing data that is manipulated by the processing circuit when executing programming. The storage medium may be any available media that can be accessed by the processing circuit including portable or fixed storage devices optical storage devices and various other mediums capable of storing containing and or carrying programming. By way of example and not limitation the storage medium may include a processor readable storage medium such as a magnetic storage device e.g. hard disk floppy disk magnetic strip an optical storage medium e.g. compact disk CD digital versatile disk DVD a smart card a flash memory device e.g. card stick key drive random access memory RAM read only memory ROM programmable ROM PROM erasable PROM EPROM electrically erasable PROM EEPROM a register a removable disk and or other mediums for storing programming as well as any combination thereof. Thus in some implementations the storage medium may be a non transitory e.g. tangible storage medium.

The storage medium may be coupled to the processing circuit such that the processing circuit can read information from and write information to the storage medium . That is the storage medium can be coupled to the processing circuit so that the storage medium is at least accessible by the processing circuit including examples where the storage medium is integral to the processing circuit and or examples where the storage medium is separate from the processing circuit .

Programming stored by the storage medium when executed by the processing circuit causes the processing circuit to perform one or more of the various functions and or process steps described herein. For example the storage medium may include one or more of the circuit module for determining signal propagation times the circuit module for specifying a delay the circuit module for determining a parameter the circuit module for driving or the circuit module for decoding . Thus according to one or more aspects of the disclosure the processing circuit is adapted to perform in conjunction with the storage medium any or all of the processes functions steps and or routines for any or all of the apparatuses described herein. As used herein the term adapted in relation to the processing circuit may refer to the processing circuit being one or more of configured employed implemented and or programmed in conjunction with the storage medium to perform a particular process function step and or routine according to various features described herein.

The memory device may represent one or more memory devices and may comprise any of the memory technologies listed above or any other suitable memory technology. The memory device may store delay related information along with other information used by one or more of the components of the apparatus . The memory device also may be used for storing data that is manipulated by the processing circuit or some other component of the apparatus . In some implementations the memory device and the storage medium are implemented as a common memory component.

The user interface includes functionality that enables a user to interact with the apparatus . For example the user interface may interface with one or more user output devices e.g. a display device etc. and one or more user input devices e.g. a keyboard a tactile input device etc. .

With the above in mind examples of operations relating to multi wire signaling according to the disclosure will be described in more detail in conjunction with the flowcharts of . For convenience the operations of or any other operations discussed or taught herein may be described as being performed by specific components. It should be appreciated however that in various implementations these operations may be performed by other types of components and may be performed using a different number of components. It also should be appreciated that one or more of the operations described herein may not be employed in a given implementation.

In some implementations the process takes place within a processing system e.g. the processing circuit of which may be located in a communication device or some other suitable apparatus. For example a delay controller associated with a multi wire channel can perform the process to dynamically adjust the delay imparted on a wire of a multi wire channel and thereby control the signal propagation times of wire pairs of the multi wire channel.

In other implementations the process takes place within a circuit design system e.g. the circuit design system illustrated in . For example the wires of a multi wire channel can be designed and manufactured to have certain signal propagation times under certain operating conditions. Thus the delay imparted on a wire of a multi wire channel can be specified during the design process and thereby control the signal propagation times of wire pairs of the multi wire channel during subsequent operation.

At block the signal propagation times associated with each wire pair of a plurality of wire pairs is determined. The manner in which this determination is made may depend in some aspects on whether the process is performed during a manufacturing process or subsequent to the manufacturing process.

During the manufacturing process a simulation tool can be used to estimate the signal propagation times of each unique differential pair for a multi wire channel that has been created using a circuit design tool. Such a simulation tool can take various parameters into account such as without limitation signal frequency signal rise times signal fall times dielectric constant Er of a substrate distance of a wire to a ground plane wire path discontinuities wire width and wire thickness.

Subsequent to the manufacturing process a delay controller or other similar component can determine e.g. measure signal propagation times associated with the wires of a multi wire channel under actual operating conditions. For example a transmitter can send data to a receiver over the wires and the receiver can loop the data back to the transmitter. Based on the corresponding round trip time and if applicable known delays at the receiver the transmitter can determine the signal propagation time over a given wire. As another example a transmitter can send known data patterns to a receiver over the wires. The receiver can then determine e.g. by sampling the received signal at a relatively high rate whether certain wires have a longer signal propagation time than other wires.

At block a delay is specified for at least one delay element coupled to at least one of the wires such that the signal propagation times associated with each wire pair of the plurality of wires are equal to one another within a margin of error. In some implementations where the plurality of wires consists of three wires and three wire pairs the at least one delay element consists of a delay element coupled to a middle wire of the three wires. As discussed herein however a delay element can be placed in various locations along a multi wire bus and different numbers of delay elements can be used in different implementations.

A delay to be imparted on a given wire can be specified e.g. selected according to the signal propagations times of the other wires as determined at block . For example using signal characterization techniques the signal propagation time for a given differential pair can be determined based on signal propagation times or associated characteristic impedance of the individual wires. Accordingly the value of a delay to be added to a given wire to ensure that all wire pairs have the substantially the same signal propagation times can be determined.

In practice the signal propagation times for the different wire pair might not be precisely equal. Rather the delay may be specified such that the signal propagation times for the different wire pair are all within a defined margin of error. Such a margin of error may be defined in different ways in different implementations. For example in some implementations the margin of error is defined as a percentage e.g. 1 2 and so on . Thus in this case the delay s may be specified such that the signal propagation times of the different wire pairs all fall within a defined percentage of one another. As another example in some implementations the margin of error is defined as a discrete time e.g. 1 ps 2 ps and so on . Thus in this case the delay s may be specified such that the signal propagation times of the different wire pairs all fall within a defined time range.

In some implementations the specification of the delay involves controlling a delay element. For example in implementations where each delay element has a programmable delay the specification of the delay involves controlling the programmable delay of each delay element.

In some implementations the specification of the delay comprises specifying a physical characteristic of each delay element. For example a length of a wire segment can be specified such that the resulting delay imparted on the wire ensures that all wire pairs of a corresponding multi wire channel have the substantially the same signal propagation times

Accordingly during some implementations of a circuit design process the specification of the delay involves generating a circuit description representative of the physical characteristic. For example a design tool can specify one of more of the length thickness or width of a wire.

During some implementations of a manufacturing process the specification of the delay involves generating a circuit e.g. on a PCB or an IC die embodying the physical characteristic. For example a fabrication system can generate a circuit having a wire that has one of more of a specified length thickness or width.

At block a parameter is determined. For example a parameter may be retrieved from memory or generated during an active process e.g. a parameter measurement process . The parameter may take different forms in different implementations. In some implementations the parameter is at least one of lengths of the wires signal propagation times associated with the wire pairs a signal frequency of signals carried by the wires an application for which signals are transmitted over the wires or a process voltage and temperature PVT condition.

At block a delay for at least one delay element is specified based on the parameter determined at block . For example using signal characterization techniques the signal propagation time for a given differential pair can be determined based on the parameter e.g. by deriving signal propagation times or associated characteristic impedance of the individual wires based at least in part on the parameter . Accordingly the value of a delay to be added to a given wire to ensure that all wire pairs have the substantially the same signal propagation times can be determined.

At block a delay is specified for at least one delay element at a transmitter. In some implementations the operations of block employ the process and or the process .

At block data is obtained for a data transfer over a multi wire channel. For example a transmitter can receive data from another component of a system such as a processing system a memory device an RF receiver or some other component.

As used herein the term data refers broadly to any type of information that can be communicated. Thus data can include without limitation control information application data e.g. user data commands addresses and so on.

Typically a given data transfer involves transmitting a defined set of data during a clock cycle or in conjunction with a transition of a clock signal. For example one or more symbols or bits can be transmitted with each clock transition in a dual data rate implementation of a multi wire channel.

At block for a particular data transfer a particular one of the wire pairs of the wires of the multi wire channel is driven whereby every other wire pair is in a high impedance state. For example as illustrated in for a three wire channel two of the wires are driven and the third wire is left floating. In a four wire channel two of the wires are driven and the other two wires are left floating open .

At block a delay is specified for at least one delay element at a transmitter. In some implementations the operations of block employ the process and or the process .

At block reception for a data transfer is commenced. For example in some implementations a receiver receives a write data command from a transmitter and commences clocking in the data from the multi wire channel. As another example in some implementations the receiver always receives on certain clocks cycles.

Again as used herein the term data refers broadly to any type of information that can be communicated. Thus the data transfer of block can include without limitation receiving control information application data e.g. user data commands addresses and so on.

At block the information received for the data transfer is decoded. Here the information is decoded based on a particular one of the wire pairs of the plurality of wires being driven and every other wire of the plurality of wires being in a high impedance state. For example in some implementations a receiver decodes information according to the mapping illustrated in and or the states illustrated in . A receiver can employ other types of decoding in other implementations.

As mentioned above it is generally desirable to reduce the amount of jitter present in a communication system. By reducing jitter timing margins for the system can be improved since symbols can be sampled over a wider window of time when jitter is low as opposed to when jitter is high. In a multi wire signaling system jitter may be reduced or mitigated by ensuring that each unique wire pair of n wires in an n wire channel has approximately the same signal propagation time within a threshold margin e.g. within a margin of error .

In some aspects of the disclosure this is achieved by reducing the delay of at least one of the wires. For example in a three wire system jitter can be reduced by decreasing the length of or facilitating negative delay on the center wire of the three wires. Thus to make the signal propagation time of each wire pair approximately equal e.g. the propagation delay is the same for the wire pairs A B B C and A C the signal propagation time of the individual wires is made unequal e.g. by reducing the delay of one of more of the individual wires .

In general the length or delay of a center wire may be decreased by adding delay anywhere along an outer wire neighboring the center wire to achieve the desired balancing of the signal propagation times between wire pairs. For example illustrates a communication system including a three wire transmitter and a three wire receiver where a first delay element can be incorporated into the transmitter a second delay element can be incorporated into the communication medium between the transmitter and the receiver or a third delay element can be incorporated into the receiver . Moreover a fourth delay element can incorporated into the transmitter a fifth delay element can be incorporated into the communication medium between the transmitter and the receiver or a sixth delay element can be incorporated into the receiver . Here the dashed boxes for the first delay element through the third delay element and for the fourth delay element through the sixth delay element represent that each delay element is optional. That is one or more of the first delay element through the third delay element and the fourth delay element through the sixth delay element could be used in a given implementation.

In the three wires driven by the transmitter are designated as an outer top wire TXA a center wire TXB and an outer bottom wire TXC e.g. corresponding to the wires A B and C of . Similarly the three wires over which signals are received by the receiver are designated as an outer top wire RXA a center wire RXB and an outer bottom wire RXC e.g. again corresponding to the wires A B and C of .

In implementations that employ the first delay element signals carried by the outer top wire TXA are delayed by the delay element . The delayed signal carried by the outer top wire TXA the signal carried by the center wire TXB and the signal carried by the outer bottom wire TXC are coupled to a first driver a second driver and a third driver respectively that drive a first wire a second wire and a third wire of an external bus.

In implementations that employ the fourth delay element signals carried by the outer bottom wire TXC are delayed by the delay element . The signal carried by the outer top wire TXA the signal carried by the center wire TXB and the delayed signal carried by the outer bottom wire TXC are coupled to the first driver the second driver and the third driver respectively that drive the first wire the second wire and the third wire of the external bus.

In implementations that employ the second delay element signals carried by the first wire are delayed by the delay element . The delayed signal carried by the first wire the signal carried by the second wire and the signal carried by the third wire are coupled to a first receiver circuit a second receiver circuit and a third receiver circuit respectively of the receiver .

In implementations that employ the fifth delay element signals carried by the third wire are delayed by the delay element . The signal carried by the first wire the signal carried by the second wire and the delayed signal carried by the third wire are coupled to the first receiver circuit the second receiver circuit and the third receiver circuit respectively of the receiver .

In implementations that employ the third delay element signals output by the first receiver circuit are delayed by the delay element . Thus the delayed signal driven by the first receiver circuit the signal driven by the second receiver circuit and the signal driven by the third receiver circuit are coupled to an input latch of the receiver .

In implementations that employ the sixth delay element signals output by the third receiver circuit are delayed by the delay element . Thus the signal driven by the first receiver circuit the signal driven by the second receiver circuit and the delayed signal driven by the third receiver circuit are coupled to an input latch of the receiver .

In the example of the signal propagation time of interest for a given wire corresponds to the time that a signal on the wire is clocked out of an output latch at the transmitter according to a transmit clock TX CLK to the time the signal is clocked into the input latch at the receiver according to a receive clock RX CLK . Thus in this case a delay element can be incorporated anywhere along the path of an outer wire between the output latch and the input latch . The delay element may be a stand alone component or embodied in another component. As an example of the latter case a delay element can be embodied in an input output I O circuit such as a driver or receiver circuit.

As mentioned above the teachings herein are applicable to multi wire channels that employ more than three wires. illustrates in a simplified manner a circuit that includes four wires e.g. transmission lines and . As shown in this single layer example the two outer wires and are of the same length but longer than the two center wires and . By adding delay to the outer wires and in this manner the signal propagation times of each of the six unique wire pairs in the circuit can be matched in accordance with the teachings herein. It should be appreciated that in other implementations delay can be added to the outer wires and using one or more of the other techniques described herein e.g. active delay elements changing other physical characteristics of the wires using multiple layers and so on .

The circuit of includes wires and . In this case the outer wires and have the same length and are longer than the center wires and . The center wires and have the same length are shorter than the outer wires and and longer than the center wire . The center wire is shorter than the center wires and and the outer wires and .

The circuit of includes wires and . In this case the outer wires and have the same length and are longer than the center wires and . The center wires and have the same length and are shorter than the outer wires and and the center wire . The center wire is longer than the center wires and and shorter than the outer wires and .

The circuit of includes wires and . In this case the two outer wires and have the same length and are longer than the center wires and . All of the center wires and are of the same length.

The external bus interface provides an interface for the components of the apparatus to an external bus . The external bus interface may include for example one or more of signal driver circuits signal receiver circuits amplifiers signal filters signal buffers or other circuitry used to interface with a signaling bus or other types of signaling media.

The processing circuit is arranged to obtain process and or send data control data access and storage issue commands and control other desired operations. The processing circuit may include circuitry adapted to implement desired programming provided by appropriate media in at least one example. In some instances the processing circuit may include circuitry adapted to perform a desired function with or without implementing programming. By way of example the processing circuit may be implemented as one or more processors one or more controllers and or other structure configured to execute executable programming and or perform a desired function. Examples of the processing circuit may include a general purpose processor a digital signal processor DSP an application specific integrated circuit ASIC a field programmable gate array FPGA or other programmable logic component discrete gate or transistor logic discrete hardware components or any combination thereof designed to perform the functions described herein. A general purpose processor may include a microprocessor as well as any conventional processor controller microcontroller or state machine. The processing circuit may also be implemented as a combination of computing components such as a combination of a DSP and a microprocessor a number of microprocessors one or more microprocessors in conjunction with a DSP core an ASIC and a microprocessor or any other number of varying configurations. These examples of the processing circuit are for illustration and other suitable configurations within the scope of the disclosure are also contemplated.

The processing circuit is adapted for processing including the execution of programming which may be stored on the storage medium . As used herein the terms programming or instructions shall be construed broadly to include without limitation instruction sets instructions code code segments program code programs programming subprograms software modules applications software applications software packages routines subroutines objects executables threads of execution procedures functions etc. whether referred to as software firmware middleware microcode hardware description language or otherwise.

In some instances the processing circuit may include one or more of a signal propagation time determining circuit module a delay specifying circuit module a wire pair driving circuit module or an information decoding circuit module .

The signal propagation time determining circuit module may include circuitry and or instructions e.g. signal propagation time determining instructions stored on the storage medium adapted to determine signal propagation times associated with wire pairs of a plurality of wires the plurality of wires including at least one middle wire a first outer wire located adjacent to one side of the at least one middle wire and a second outer wire located adjacent to another side of the at least one middle wire. For example in some implementations the information is retrieved from the memory device or collected by activating a process that estimates or measures signal propagation times. An indication of the signal propagation times is then output e.g. stored in the memory device or passed to another component .

The delay specifying circuit module may include circuitry and or instructions e.g. delay specifying instructions stored on the storage medium adapted to specify a delay for at least one delay element coupled to at least one of the plurality of wires wherein the at least one delay element provides an amount of signal delay such that a signal propagation time associated with the at least one middle wire is less than a signal propagation time associated with at least one of the first outer wire or the second outer wire and the signal propagation times associated with the wire pairs of the plurality of wires are equal to one another within a margin of error. For example in some implementations the information is retrieved from the memory device or from an active process. A delay value is then determined based on the information. An indication of the delay is then output e.g. stored in the memory device or passed to another component .

The wire pair driving circuit module may include circuitry and or instructions e.g. wire pair driving instructions stored on the storage medium adapted to cause data to be driven onto a multi wire channel for example by driving a particular one of the wire pairs of the plurality of wires for a particular data transfer whereby every other wire of the plurality of wires is in a high impedance state. For example in some implementations information to be sent over a channel is obtained and the information is sent to a driver circuit.

The information decoding circuit module may include circuitry and or instructions e.g. information decoding instructions stored on the storage medium adapted to decode information received via a multi wire channel for example by decoding information for a particular data transfer based on a particular one of the wire pairs of the plurality of wires being driven and every other wire of the plurality of wires being in a high impedance state. For example in some implementations received information is decoded by comparing the signal received on different wires e.g. as in .

The storage medium may represent one or more processor readable devices for storing programming electronic data databases or other digital information. The storage medium may also be used for storing data that is manipulated by the processing circuit when executing programming. The storage medium may be any available media that can be accessed by the processing circuit including portable or fixed storage devices optical storage devices and various other mediums capable of storing containing and or carrying programming. By way of example and not limitation the storage medium may include a processor readable storage medium such as a magnetic storage device e.g. hard disk floppy disk magnetic strip an optical storage medium e.g. compact disk CD digital versatile disk DVD a smart card a flash memory device e.g. card stick key drive random access memory RAM read only memory ROM programmable ROM PROM erasable PROM EPROM electrically erasable PROM EEPROM a register a removable disk and or other mediums for storing programming as well as any combination thereof. Thus in some implementations the storage medium may be a non transitory e.g. tangible storage medium.

The storage medium may be coupled to the processing circuit such that the processing circuit can read information from and write information to the storage medium . That is the storage medium can be coupled to the processing circuit so that the storage medium is at least accessible by the processing circuit including examples where the storage medium is integral to the processing circuit and or examples where the storage medium is separate from the processing circuit .

Programming instructions stored by the storage medium when executed by the processing circuit causes the processing circuit to perform one or more of the various functions and or process steps described herein. For example the storage medium may include one or more of the signal propagation time determining instructions the delay specifying instructions the wire pair driving instructions or the information decoding instructions . Thus according to one or more aspects of the disclosure the processing circuit is adapted to perform in conjunction with the storage medium any or all of the processes functions steps and or routines for any or all of the apparatuses described herein. As used herein the term adapted in relation to the processing circuit may refer to the processing circuit being one or more of configured employed implemented and or programmed in conjunction with the storage medium to perform a particular process function step and or routine according to various features described herein.

The memory device may represent one or more memory devices and may comprise any of the memory technologies listed above or any other suitable memory technology. The memory device may store delay related information along with other information used by one or more of the components of the apparatus . The memory device also may be used for storing data that is manipulated by the processing circuit or some other component of the apparatus . In some implementations the memory device and the storage medium are implemented as a common memory component.

The user interface includes functionality that enables a user to interact with the apparatus . For example the user interface may interface with one or more user output devices e.g. a display device etc. and one or more user input devices e.g. a keyboard a tactile input device etc. .

With the above in mind examples of operations relating to multi wire signaling according to the disclosure will be described in more detail in conjunction with the flowchart of . For convenience the operations of or any other operations discussed or taught herein may be described as being performed by specific components. It should be appreciated however that in various implementations these operations may be performed by other types of components and may be performed using a different number of components. It also should be appreciated that one or more of the operations described herein may not be employed in a given implementation.

In some implementations the process takes place within a processing system e.g. the processing circuit of which may be located in a communication device or some other suitable apparatus. For example a delay controller associated with a multi wire channel can perform the process to dynamically adjust the delay imparted on a wire of a multi wire channel and thereby control the signal propagation times of wire pairs of the multi wire channel.

In other implementations the process takes place within a circuit design system e.g. the circuit design system illustrated in . For example the wires of a multi wire channel can be designed and manufactured to have certain signal propagation times under certain operating conditions. Thus the delay imparted on a wire of a multi wire channel can be specified during the design process and thereby control the signal propagation times of wire pairs of the multi wire channel during subsequent operation.

At block the signal propagation times associated with wire pairs of a plurality of wires are determined. The plurality of wires include at least one middle wire a first outer wire located adjacent to one side of the at least one middle wire and a second outer wire located adjacent to another side of the at least one middle wire. In an aspect of the disclosure the at least one middle wire includes two or more middle wires.

The manner in which the determination is made may depend in some aspects on whether the process is performed during a manufacturing process or subsequent to the manufacturing process. During the manufacturing process a simulation tool can be used to estimate the signal propagation times of each unique differential pair for a multi wire channel that has been created using a circuit design tool. Such a simulation tool can take various parameters into account such as without limitation signal frequency signal rise times signal fall times dielectric constant Er of a substrate distance of a wire to a ground plane wire path discontinuities wire width and wire thickness.

Subsequent to the manufacturing process a delay controller or other similar component can determine e.g. measure signal propagation times associated with the wires of a multi wire channel under actual operating conditions. For example a transmitter can send data to a receiver over the wires and the receiver can loop the data back to the transmitter. Based on the corresponding round trip time and if applicable known delays at the receiver the transmitter can determine the signal propagation time over a given wire. As another example a transmitter can send known data patterns to a receiver over the wires. The receiver can then determine e.g. by sampling the received signal at a relatively high rate whether certain wires have a longer signal propagation time than other wires.

At block a delay for at least one delay element coupled to at least one of the plurality of wires is specified. The at least one delay element provides an amount of signal delay such that a signal propagation time associated with the at least one middle wire is less than a signal propagation time associated with at least one of the first outer wire or the second outer wire and the signal propagation times associated with the wire pairs of the plurality of wires are equal to one another within a margin of error. In an aspect of the disclosure the at least one delay element includes a delay element coupled to the first outer wire and or the second outer wire. As discussed herein however a delay element can be placed in various locations along a multi wire bus and different numbers of delay elements can be used in different implementations.

A delay to be imparted on a given wire can be specified e.g. selected according to the signal propagations times of the other wires as determined at block . For example using signal characterization techniques the signal propagation time for a given differential pair can be determined based on signal propagation times or associated characteristic impedance of the individual wires. Accordingly the value of a delay to be added to a given wire to ensure that all wire pairs have the substantially the same signal propagation times can be determined.

In practice the signal propagation times for the different wire pair might not be precisely equal. Rather the delay may be specified such that the signal propagation times for the different wire pair are all within a defined margin of error. Such a margin of error may be defined in different ways in different implementations. For example in some implementations the margin of error is defined as a percentage e.g. 1 2 and so on . Thus in this case the delay s may be specified such that the signal propagation times of the different wire pairs all fall within a defined percentage of one another. As another example in some implementations the margin of error is defined as a discrete time e.g. 1 ps 2 ps and so on . Thus in this case the delay s may be specified such that the signal propagation times of the different wire pairs all fall within a defined time range.

In an aspect of the disclosure the at least one delay element includes a wire of a defined length such that an overall length of the at least one middle wire is shorter than a length of the first outer wire and the second outer wire. In a further aspect of the disclosure the at least one delay element has a programmable delay. Therefore the specification of the delay includes controlling the programmable delay of the at least one delay element.

At block a particular one of the wire pairs of the plurality of wires may be driven for a particular data transfer whereby every other wire of the plurality of wires is in a high impedance state.

At block information for a particular data transfer may be decoded based on a particular one of the wire pairs of the plurality of wires being driven wherein every other wire of the plurality of wires is in a high impedance state. In an aspect of the disclosure the information is decoded via a receiver circuit coupled to the plurality of wires. The receiver circuit may include at least one differential receiver and the at least one delay element is coupled to an output of the at least one differential receiver.

One or more of the components steps features and or functions illustrated in the figures may be rearranged and or combined into a single component step feature or function or embodied in several components steps or functions. Additional elements components steps and or functions may also be added without departing from novel features disclosed herein. The apparatus devices and or components illustrated in the figures may be configured to perform one or more of the methods features or steps described herein. The novel algorithms described herein may also be efficiently implemented in software and or embedded in hardware.

It is to be understood that the specific order or hierarchy of steps in the methods disclosed is an illustration of exemplary processes. Based upon design preferences it is understood that the specific order or hierarchy of steps in the methods may be rearranged. The accompanying method claims present elements of the various steps in a sample order and are not meant to be limited to the specific order or hierarchy presented unless specifically recited therein. Additional elements components steps and or functions may also be added or not utilized without departing from the disclosure.

While features of the disclosure may have been discussed relative to certain implementations and figures all implementations of the disclosure can include one or more of the advantageous features discussed herein. In other words while one or more implementations may have been discussed as having certain advantageous features one or more of such features may also be used in accordance with any of the various implementations discussed herein. In similar fashion while exemplary implementations may have been discussed herein as device system or method implementations it should be understood that such exemplary implementations can be implemented in various devices systems and methods.

Also it is noted that at least some implementations have been described as a process that is depicted as a flowchart a flow diagram a structure diagram or a block diagram. Although a flowchart may describe the operations as a sequential process many of the operations can be performed in parallel or concurrently. In addition the order of the operations may be re arranged. A process is terminated when its operations are completed. A process may correspond to a method a function a procedure a subroutine a subprogram etc. When a process corresponds to a function its termination corresponds to a return of the function to the calling function or the main function. The various methods described herein may be partially or fully implemented by programming e.g. instructions and or data that may be stored in a machine readable computer readable and or processor readable storage medium and executed by one or more processors machines and or devices.

Those of skill in the art would further appreciate that the various illustrative logical blocks modules circuits and algorithm steps described in connection with the implementations disclosed herein may be implemented as hardware software firmware middleware microcode or any combination thereof. To clearly illustrate this interchangeability various illustrative components blocks modules circuits and steps have been described above generally in terms of their functionality. Whether such functionality is implemented as hardware or software depends upon the particular application and design constraints imposed on the overall system.

Within the disclosure the word exemplary is used to mean serving as an example instance or illustration. Any implementation or aspect described herein as exemplary is not necessarily to be construed as preferred or advantageous over other aspects of the disclosure. Likewise the term aspects does not require that all aspects of the disclosure include the discussed feature advantage or mode of operation. The term coupled is used herein to refer to the direct or indirect coupling between two objects. For example if object A physically touches object B and object B touches object C then objects A and C may still be considered coupled to one another even if they do not directly physically touch each other. For instance a first die may be coupled to a second die in a package even though the first die is never directly physically in contact with the second die. The terms circuit and circuitry are used broadly and intended to include both hardware implementations of electrical devices and wires that when connected and configured enable the performance of the functions described in the disclosure without limitation as to the type of electronic circuits as well as software implementations of information and instructions that when executed by a processor enable the performance of the functions described in the disclosure.

As used herein the term determining encompasses a wide variety of actions. For example determining may include calculating computing processing deriving investigating looking up e.g. looking up in a table a database or another data structure ascertaining and the like. Also determining may include receiving e.g. receiving information accessing e.g. accessing data in a memory and the like. Also determining may include resolving selecting choosing establishing and the like.

The previous description is provided to enable any person skilled in the art to practice the various aspects described herein. Various modifications to these aspects will be readily apparent to those skilled in the art and the generic principles defined herein may be applied to other aspects. Thus the claims are not intended to be limited to the aspects shown herein but are to be accorded the full scope consistent with the language of the claims wherein reference to an element in the singular is not intended to mean one and only one unless specifically so stated but rather one or more. Unless specifically stated otherwise the term some refers to one or more. A phrase referring to at least one of a list of items refers to any combination of those items including single members. As an example at least one of a b or c is intended to cover a b c a and b a and c b and c and a b and c. All structural and functional equivalents to the elements of the various aspects described throughout this disclosure that are known or later come to be known to those of ordinary skill in the art are expressly incorporated herein by reference and are intended to be encompassed by the claims. Moreover nothing disclosed herein is intended to be dedicated to the public regardless of whether such disclosure is explicitly recited in the claims. No claim element is to be construed under the provisions of 35 U.S.C. 112 f unless the element is expressly recited using the phrase means for or in the case of a method claim the element is recited using the phrase step for. 

Accordingly the various features associate with the examples described herein and shown in the accompanying drawings can be implemented in different examples and implementations without departing from the scope of the disclosure. Therefore although certain specific constructions and arrangements have been described and shown in the accompanying drawings such implementations are merely illustrative and not restrictive of the scope of the disclosure since various other additions and modifications to and deletions from the described implementations will be apparent to one of ordinary skill in the art. Thus the scope of the disclosure is only determined by the literal language and legal equivalents of the claims which follow.

