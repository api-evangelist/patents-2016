---

title: Method and apparatus for identity federation gateway
abstract: Techniques for an ID federation gateway include determining whether a user associated with a request for a particular network resource is to be identified by the provider of the particular service or by a different party. The service also comprises causing the different party to provide identification data that indicates an identity for the user, if the user is to be identified by the different party. The method further comprises causing user credentials data, based on the identification data, to be sent to an authentication process of the provider for a set of one or more network resources that includes the particular network resource requested by the user, if the data indicates that the user is successfully identified.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09660975&OS=09660975&RS=09660975
owner: Nokia Technologies Oy
number: 09660975
owner_city: Espoo
owner_country: FI
publication_date: 20160426
---
This application is a Continuation of U.S. application Ser. No. 14 454 228 entitled Method and Apparatus for Identify Federation Gateway filed Aug. 7 2014 which is a Continuation of U.S. application Ser. No. 12 708 764 now U.S. Pat. No. 8 984 588 filed Feb. 19 2010 the contents of which are incorporated herein by reference in their entireties.

Network service providers and device manufacturers are continually challenged to deliver value and convenience to consumers by for example providing a suite of compelling network services. Subscription network services involve authenticating users during a user sign on process. However network resources are wasted and user experience is diminished when a user is required to sign on several times to participate in several services available from the same network or service provider. Thus there is a move to allow a user to sign on once and thereby gain access to several services from the same provider.

Federated identity or the federation of identity refers to technologies standards and use cases which serve to enable the portability of identity information across otherwise autonomous security domains e.g. by different providers. The ultimate goal of identity federation is to enable users of one domain to securely access data or systems of another domain seamlessly and without the need for completely redundant user administration. Changing an authentication process for one provider to a federated sign on for multiple providers is challenging and could involve modifying each service of each provider to use the federated procedure instead of or in addition to their internal authentication procedures.

Therefore there is a need for an approach for enabling a federation of identification for systems that already provide an authentication procedure for multiple services which does not suffer all the disadvantages of prior art approaches.

According to one embodiment a method comprises facilitating access including granting access rights to an interface to allow access to a service via a network. The service comprises determining whether a user associated with a request for a particular network resource is to be identified by the provider of the particular service or by a different party. The service also comprises causing the different party to provide identification data that indicates an identity for the user if the user is to be identified by the different party. The method further comprises causing user credentials data based on the identification data to be sent to an authentication process of the provider for a set of one or more network resources that includes the particular network resource requested by the user if the data indicates that the user is successfully identified.

According to another embodiment an apparatus comprising at least one processor and at least one memory including computer program code the at least one memory and the computer program code configured to with the at least one processor cause at least in part the apparatus to determine whether a user associated with a request for a particular network resource is to be identified by the provider of the particular service or by a different party. The apparatus is also caused to cause the different party to provide identification data that indicates an identity for the user if the user is to be identified by the different party. The apparatus is further caused to cause user credentials data based on the identification data to be sent to an authentication process of the provider for a set of one or more network resources that includes the particular network resource requested by the user if the data indicates that the user is successfully identified.

According to another embodiment a computer readable storage medium carrying one or more sequences of one or more instructions which when executed by one or more processors cause at least in part an apparatus to apparatus to determine whether a user associated with a request for a particular network resource is to be identified by the provider of the particular service or by a different party. The apparatus is also caused to cause the different party to provide identification data that indicates an identity for the user if the user is to be identified by the different party. The apparatus is further caused to cause user credentials data based on the identification data to be sent to an authentication process of the provider for a set of one or more network resources that includes the particular network resource requested by the user if the data indicates that the user is successfully identified.

According to another embodiment an apparatus comprises means for determining whether a user associated with a request for a particular network resource is to be identified by the provider of the particular service or by a different party. The apparatus also comprises means for causing the different party to provide identification data that indicates an identity for the user if the user is to be identified by the different party. The apparatus further comprises means for causing user credentials data based on the identification data to be sent to an authentication process of the provider for a set of one or more network resources that includes the particular network resource requested by the user if the data indicates that the user is successfully identified.

Still other aspects features and advantages of the invention are readily apparent from the following detailed description simply by illustrating a number of particular embodiments and implementations including the best mode contemplated for carrying out the invention. The invention is also capable of other and different embodiments and its several details can be modified in various obvious respects all without departing from the spirit and scope of the invention. Accordingly the drawings and description are to be regarded as illustrative in nature and not as restrictive.

Examples of a method apparatus and computer program for an ID federation gateway are disclosed. In the following description for the purposes of explanation numerous specific details are set forth in order to provide a thorough understanding of the embodiments of the invention. It is apparent however to one skilled in the art that the embodiments of the invention may be practiced without these specific details or with an equivalent arrangement. In other instances well known structures and devices are shown in block diagram form in order to avoid unnecessarily obscuring the embodiments of the invention.

As used herein the term network resource refers to any service or data structure or communication link available through connection to a network. A single sign on SSO process refers to any process of a single provider which enables a user during one session connected to the network to access a plurality of network resources from that provider without redundant entry by the user of user identification information. A single provider is often identified by a single network domain name in the uniform resource identification URI naming system as used for example with a uniform resource locator URL naming system. An example single sign on process is the single sign on processes for the OVI system of the NOKIA CORPORATION of Espoo Finland. An access provider is a network service provider that grants access for user equipment e.g. UE described below to access a network e.g. communication network described below . As used herein an identification process e.g. identifying includes determining an identity or authenticating a particular user as having that identity or determining that the particular user is authorized to access one or more services or some combination.

Although various embodiments are described with respect to involving in the SSO of a network resource provider identification by a different network access provider it is contemplated that the approach described herein may be used with other sets of two or more different providers and any federated identity services with legacy authentication processes whether SSO processes or not.

As shown in the system comprises user equipment UE having connectivity to internal authentication service and services through and access provider identification service via a communication network . By way of example the communication network of system includes one or more networks such as a data network not shown a wireless network not shown a telephony network not shown or any combination thereof. It is contemplated that the data network may be any local area network LAN metropolitan area network MAN wide area network WAN a public data network e.g. the Internet short range wireless network or any other suitable packet switched network such as a commercially owned proprietary packet switched network e.g. a proprietary cable or fiber optic network and the like or any combination thereof. In addition the wireless network may be for example a cellular network and may employ various technologies including enhanced data rates for global evolution EDGE general packet radio service GPRS global system for mobile communications GSM Internet protocol multimedia subsystem IMS universal mobile telecommunications system UMTS etc. as well as any other suitable wireless medium e.g. worldwide interoperability for microwave access WiMAX Long Term Evolution LTE networks code division multiple access CDMA wideband code division multiple access WCDMA wireless fidelity WiFi wireless LAN WLAN Bluetooth Internet Protocol IP data casting satellite mobile ad hoc network MANET and the like or any combination thereof.

The UE is any type of mobile terminal fixed terminal or portable terminal including a mobile handset station unit device multimedia computer multimedia tablet Internet node communicator desktop computer laptop computer Personal Digital Assistants PDAs audio video player digital camera camcorder positioning device television receiver radio broadcast receiver electronic book device game device or any combination thereof. It is also contemplated that the UE can support any type of interface to the user such as wearable circuitry etc. .

By way of example the UE services internal authentication service and access provider identification service communicate with each other and other components of the communication network using well known new or still developing protocols. In this context a protocol includes a set of rules defining how the network nodes within the communication network interact with each other based on information sent over the communication links. The protocols are effective at different layers of operation within each node from generating and receiving physical signals of various types to selecting a link for transferring those signals to the format of information indicated by those signals to identifying which software application executing on a computer system sends or receives the information. The conceptually different layers of protocols for exchanging information over a network are described in the Open Systems Interconnection OSI Reference Model.

Communications between the network nodes are typically effected by exchanging discrete packets of data. Each packet typically comprises 1 header information associated with a particular protocol and 2 payload information that follows the header information and contains information that may be processed independently of that particular protocol. In some protocols the packet includes 3 trailer information following the payload and indicating the end of the payload information. The header includes information such as the source of the packet its destination the length of the payload and other properties used by the protocol. Often the data in the payload for the particular protocol includes a header and payload for a different protocol associated with a different higher layer of the OSI Reference Model. The header for a particular protocol typically indicates a type for the next protocol contained in its payload. The higher layer protocol is said to be encapsulated in the lower layer protocol. The headers included in a packet traversing multiple heterogeneous networks such as the Internet typically include a physical layer 1 header a data link layer 2 header an internetwork layer 3 header and a transport layer 4 header and various application headers layer 5 layer 6 and layer 7 as defined by the OSI Reference Model.

The client server model of computer process interaction is widely known and used. According to the client server model a client process sends a message including a request to a server process and the server process responds by providing a service. The server process may also return a message with a response to the client process. Often the client process and server process execute on different computer devices called hosts and communicate via a network using one or more protocols for network communications. The term server is conventionally used to refer to the process that provides the service or the host computer on which the process operates. Similarly the term client is conventionally used to refer to the process that makes the request or the host computer on which the process operates. As used herein the terms client and server refer to the processes rather than the host computers unless otherwise clear from the context. In addition the process performed by a server can be broken up to run as multiple processes on multiple hosts sometimes called tiers for reasons that include reliability scalability and redundancy among others. A well known client process available on most nodes connected to a communications network is a World Wide Web client called a web browser or simply browser that interacts through messages formatted according to the hypertext transfer protocol HTTP with any of a large number of servers called World Wide Web servers that provide web pages described by the hypertext markup language HTML .

In the illustrated embodiment UE includes a client process for at least one of the network services a web browser and an authentication client module .

The authentication client module may be implemented as a chip set as shown in and described below with or without one or more computer program instructions. In the legacy authentication system when the browser or client attempts to send a message requesting a service of the resource provider the authentication client module intercepts the message and directs the request to the legacy authentication service. The legacy authentication service determines whether a user of the UE is already signed on during the current session with network . If not a user interface UI is sent to the authentication client module to present to the user to prompt for user inputs employed to identify the user. The UI may be included in any manner known in the art such as a script in an HTML document delivered via HTTP. Based on those inputs communicated from the authentication client module to the legacy authentication service the user is either accepted or rejected by the legacy authentication service. A rejection is communicated to the user through the authentication client module . If accepted an authentication token is passed to the authentication client module for use in further requests for other services during the current session. Subsequent messages from client or browser requesting a network service of the provider are intercepted by the authentication client module and sent to the legacy authentication service with the authentication token. If the authentication token is not out of date the request is forwarded to the correct service with whatever credentials required by the service to perform the requested service. If out of date the UI is sent by the internal authentication service to the authentication client module to present to the user as described above.

By way of example the ID federation gateway includes one or more components for providing an ID federation gateway. The gateway may be implemented as a chip set as shown in described below with or without one or more computer program instructions. It is contemplated that the functions of these components may be combined in one or more components or performed by other components of equivalent functionality on one or more hosts connected to network . The ID federation gateway abstracts third party federated identity services for both services such as OVI Services and legacy authentication service such as OVI SSO . The ID federation gateway communicates with authentication client module and legacy authentication service and federated identity services using one or more messages described in .

The device ID field holds data that uniquely indicates user equipment such as a Mobile Subscriber Integrated Services Digital Network Number MSISDN which is a cell telephone number or some other identifier defined by an access provider such as an International Mobile Subscriber Identity IMSI identifier a unique 15 digit code used to identify an individual user on a global system for mobile communications GSM network. These options are indicated by the symbols IMSI MSISDN in field . An IMSI value is typically stored on a Subscriber Identity Module SIM card a device used to store information in many mobile phones especially for advanced features. While the IMSI indicates a user who is supposed to control a mobile UE it is not a guarantee that the correct user is actually in control of the mobile UE. Thus user authentication e.g. involving entry of a password is still desirable during identification.

The details field holds further details about the UE or user such as features available on the UE like operating system applications such as global positioning system GPS and Bluetooth capabilities among many others well known in the art. In some embodiments field is omitted.

In some embodiments authentication client module uses request message to request identity provisioning data from a network component when UE is powered up. In some embodiments the authentication client module includes detailed information in details field in the provisioning request message in order to fine grain data returned by a provisioning service.

The identification URL field holds data that indicates a service and service parameters to use when a user attempts to obtain a network resource that involves user identification. A URL with associated parameters is easily sent in an HTTP message used by browser and many clients of services such as client . In some embodiments at least one parameter for the URL in field indicates whether the user of the user equipment is to be identified employing the legacy authentication service such as an SSO service or with the federated identity service such as indicated by the symbols SSO IDFED in field .

In some embodiments provisioning data is pushed to authentication client module on a mobile terminal for example in a device provisioning response message sent automatically to every mobile terminal that connects to a network such as communications network e.g. based on an MSISDN value presented during communication without requiring a device provisioning request message .

When the authentication client module detects a request for a resource of a resource provider an authentication request message is sent to the URL with parameters provided in field . is a diagram of an identification request message for a network resource according to one embodiment. Identification request message includes a message type field a network address field an identification URL field and one or more network resource URL fields . The message type field holds data that indicates the message is an identification request message sent by the authentication client module . The network address field holds data that indicates the network address of the authentication client module . The identification URL field holds the data provided in field with any parameters such as the indication whether the authentication is done by the legacy authentication service or the federated identity service e.g. access provider identification service .

The network resource URL field holds data that indicates the network resource e.g. service for which the user desires to sign on.

In various embodiments the ID federation gateway prompts the user for input such as user name and password to determine whether a user of UE is authentically a particular user registered with one or more network resources. The prompts are presented on the UE in one or more user interfaces UIs . is a diagram of an identification user interface UI message according to one embodiment. The identification UI message includes a message type field a network address field and an identification UI field . The message type field holds data that indicates the message is an identification UI message sent to the authentication client module . The network address field holds data that indicates the network address of sending process e.g. ID federation gateway .

The identification UI field holds data that indicates the UI to be presented to the user e.g. the user of UE . In some embodiments the identification UI field includes data that is to be presented to the user such as script for a form in an HTML document sent via HTTP as is well known in the art. In some embodiments the identification UI field includes data that redirects a client to the federated identity service such as access provider identification service . Any method may be used to cause the client process to be redirected such as a redirect URL in an HTML document sent via HTTP to client or browser as is well known in the art. The URL includes one or more parameters that cause the federated identity service to present an identification UI at the user equipment. The user inputs to the UI are returned to the federated identity service. In some embodiments the redirect URL in the identification UI field includes data that causes the response from the federated identity service to be sent to the ID federation gateway either directly or indirectly by a redirect in a response sent from the federated ID service to the user equipment.

As a result of receiving user input prompted by the identification UI the federated identity service determines whether the user is successfully identified or not and returns the result in a federated credentials message. is a diagram of a federated credentials message according to one embodiment. The federated credentials message includes a message type field a network address field a destination network address field and a federated credentials field . The message type field holds data that indicates the message is a federated credentials message sent by the federated identity service. The network address field holds data that indicates the network address of sending process e.g. federated identity service such as access provider identification service . The destination network address field holds data that indicates the network address of the destination. In some embodiments the destination is a URL for the browser or client with a redirect to the ID federation gateway . In some embodiments the destination is a URL for the ID federation gateway directly.

The federated credentials field holds data that indicates the result from the federated identity services authentication process. If authentication failed the result is a failure code indicating a reason for failure e.g. unknown user name incorrect password negative account balance among others . If authentication succeeded the result is a token that indicates the user and in some embodiments other data such as time with some security code such as a digital signature that can be checked using a shared secret or public key for the federated identity service as is well known in the art. The security code indicates that the token indeed came from the federated identity service. The user is indicated by a code that is shared among all members of the ID federation including the provider of services . Thus successful authentication by third party federated identity service e.g. access provider identification service redirects authentication client module back to ID federation gateway with proof of successful authentication token .

After the ID federation gateway receives the federated credential message and exchanges messages with the legacy authentication service based on the federated credentials the gateway sends an authentication result message to the user e.g. to the authentication client which presents the result to the user. is a diagram of an identification result message according to one embodiment. The identification result message includes a message type field a network address field a success failure reason field and a resource URL field . The message type field holds data that indicates the message is an identification result message sent by the ID federation gateway . The network address field holds data that indicates the network address of the sending process e.g. ID federation gateway .

The success failure reason field holds data that indicates the result from the identification process. If identification failed the result is a failure code indicating a reason for failure e.g. unknown user name incorrect password negative account balance among others . If identification succeeded the data indicates success. In some embodiments if identification is successful then the field includes a token from the legacy authentication system.

The resource URL field holds data that indicates the URL of the resource with any parameters including any parameters granting access such as an authentication token if the result in field indicates a success. Otherwise the field is empty or omitted.

Although messages in through are shown as integral blocks with particular fields in a particular order for purposes of illustration in other embodiments one or more fields or portions thereof occur in a different order in one or more messages or are omitted or one or more fields are added or the message is changed in some combination of ways. For example in some embodiments the message type fields and network address fields are included in one or more header portions of one or more protocols used to deliver the message through the network e.g. through communications network .

In step a provisioning request is received from user equipment to determine how to perform identification for a user of the equipment. For example a request for provisioning data from a network component is sent as message by the authentication client module on UE to the legacy authentication service and intercepted by the ID federation gateway executing on the same host with the legacy authentication service. Thus an initial message directed to the single sign on process of the provider is caused to be diverted away from the single sign on process to the gateway during step . In some embodiments an initial request for one of the network resources offered by the network resource provider e.g. an initial request for one or more of services serves as the provisioning request received in step . In some embodiments step determines when the user equipment connects to the network.

In step it is determined whether the user equipment is subject to identification by a federated identity service or not. Any method may be used to determine this such as parsing the initial message to determine the user equipment indicated in device ID field . For example the contents of the device ID field such as a MSISDN value are compared to a network database that indicates the access provider for the user equipment. If the access provider is a member of an identity federation then the federated identity service for the access provider is determined. Thus in some embodiments a database is used for determining user equipment associated with identification by the different party e.g. by the federated identity service. If not and there is no other member of an identity federation associated with the device ID data in field then it is determined to use the internal authentication service to identify and authenticate the user. Thus step determines whether a user associated with a request for a particular network resource is to be identified by the provider of the particular service or by a different party. This provides the advantage of abstracting the third party interactions out of the legacy system such as the legacy authentication service and the services . This abstraction provides the advantage of reducing the computational resources to update and integrate the third party interactions into the legacy authentication service and services . Step is an example means of achieving this advantage.

In step a device provisioning response message such as message is sent to the user equipment e.g. to the authentication client module on UE . The response message includes data that indicates the identification process determined in step e.g. inserted in field . For example the URL of the ID federation gateway with at least one parameter is inserted into identification URL field of message . The at least one parameter indicates legacy authentication service if there is no federated identity service. The parameter indicates the federated identity service if there is one as determined in step . In some embodiments the URL of the authentication service is inserted into field if there is no federated identity service and the URL of the ID federation gateway with a parameter indicating the federated identity service is inserted into field if there is a federated identity service. This further abstracts the third party interactions and achieves the advantage of reducing the computational resources to update and integrate the third party interactions into the legacy authentication service and services . Step is an example means of achieving this advantage. Thus if the user equipment connects to the network then provisioning data that indicates the different party is caused to be sent to the user equipment. By sending the provisioning message to the authentication client the provisioning data is included in the request for the particular service as described in more detail below.

In step a request is received from user equipment to access a network resource that involves a user identity e.g. one or more of services . For example identification request message is received indicating the network resource to be accessed in field and the identification URL in field . The data in field indicates whether identification is to be done using an internal system such as the legacy SSO or a federated identity service such as access provider identification service .

In step it is determined whether an internal authentication system is to be used such as legacy SSO service. For example this determination is made based on the contents of field . If so then in step the request for access is passed to the internal system e.g. the legacy SSO service as described above with reference to . If not then a third party i.e. a federated identity service is to identify a user and control passes to step . Thus step is a means for causing the different party to provide identification data that indicates an identity for the user if the user is to be identified by the different party. This further abstracts the third party interactions and achieves the advantage of reducing the computational resources to update and integrate the third party interactions into the internal authentication service and network services . Step is an example means of achieving this advantage

In step it is determined whether the identification user interface UI is to be provided by the third party i.e. the federated identity service. If so then in step the process on the user equipment e.g. authentication client module is redirected to the third party. For example message is sent to the user equipment with a redirect to the federated identity service in field . In some embodiments the redirect includes data so that the response is redirected to the ID federation gateway as described below. Thus in some embodiments step includes forming a redirected request that is redirected to the different party and includes a separate redirect of a response from the different party to the service and causing the redirected request to be sent to the user equipment.

Furthermore step is an example means for causing a different party from the resource provider to provide identification data that indicates an identity for the user. Step achieves the advantage of using the third party identification without changing the legacy internal authentication service or services thus saving computational resources on the hosts of those services. This also achieves the advantage of using the UI provided by the third party thus saving computational resources on the legacy authentication service. Thus steps and are example means for achieving this additional advantage.

If it is determined in step that the third party does not provide the UI then in step an identification UI also called a logon UI for convenience hereinafter is sent to the user equipment. For example message is sent to the user equipment with a script for the logon UI in field . Thus step includes causing to be sent to the user equipment a user interface that presents prompts for input from a user for the different party to identify the user.

In step it is determined whether a response is received from the user equipment with user input. If no response is received within a reasonable time e.g. within five minutes then logon fails and control passes to step . In some embodiments step returns only a user response to the UI sent by the third party and not an identification result such as a token or failure code. In such embodiments the user responses from step are returned to step as indicated by the dashed arrow.

In step a failure notice is sent to the user equipment. The failure reason is presented on a display of the user equipment e.g. on a display of UE by authentication client module and the process ends. For example message is sent to authentication client module with data in field indicating a failure for lack of user input.

If it is determined in step that a response is received from the user equipment with user input within an appropriate time then in step data indicating the user response is sent to the third party i.e. to the appropriate federated identity service. Thus step includes causing to be sent to the different party data based on user responses to the prompts of the user interface. This is one means for causing the different party to provide identification data that indicates an identity for the user and achieves the advantage of using the federated identity service without changing the rest of the legacy authentication service. In some embodiments this takes place offline e.g. by utilizing digital signatures which involves a trusted relationship between the ID federation gateway and the federated identity service e.g. access provider identification service .

In step it is determined whether the third party has successfully identified the user. For example as a result of step or the user credential message is received at the gateway from the third party. Thus step includes receiving identification data in response to step sending to the user equipment a redirected request that is redirected to the different party and receiving the identification data in response to step sending to the different party the data based on user responses to the prompts of the user interface . The message is parsed to determine whether identification information such as field indicates a valid token. If field does not include a valid token then user identification is a failure and control passes to step described above. In step data in field indicates a failure code for an invalid token or other failure code from field and is sent to the user equipment for presentation to a user.

If it is determined in step that the user is successfully identified by the third party then in step data indicating the user credentials based on the valid token are sent to the internal system e.g. the legacy SSO service. The user credentials are based on the identification information sent by the third party in field of message . Thus if the data indicates that the user is successfully identified then user credentials data based on the identification data are caused to be sent to an authentication process such as a single sign on process of the provider. This provides the advantage of using the legacy authentication or SSO service when no federated identity service is available so that redundant processing is avoided for signing on to any or all of the services of the network resource provider.

In step it is determined whether the user is successfully signed on to the legacy authentication system e.g. SSO service. The valid token provided by the third party service might not indicate a registered user of the services provided by the network resource provider e.g. OVI. The result of the internal system is provided as a returned call parameter in an application programming interface API or a client server message such as an HTTP message. In some embodiments successful identification on the legacy SSO returns an SSO token. If it is determined in step that the user is not successfully signed on to the internal system then control passes back to step to send to the user equipment a failure notice with the reason for failure as described above.

If it is determined in step that the user is successfully signed on to the internal system then in step access is granted to the network resource such as one or more of services and a notice of success is sent to the user equipment. Thus the ID federation gateway utilizes core authentication service to create a transparent system wide authentication context with an authentication token. In some embodiments the notice of success is a message sent to authentication client module for presentation on a display of user equipment such as UE . In some embodiments the notice of success is an opening page of the network resource such as a home Web page of service sent as an HTML document in an HTTP message.

The processes represented in are services client and authentication client module in UE an access provider identification service as an example federated identity service and an internal authentication service comprising an ID federation gateway and a legacy authentication service such as a legacy SSO .

A request message is sent from client or browser to access a resource such as service from a network resource provider. The authentication client intercepts the request message to direct it to an appropriate user identification process. To determine the appropriate identification process for the UE the authentication client sends a provisioning message such as message to a default network component such as internal authentication service . The provisioning message identifies the UE with as much detail as possible such as with a MSISDN or IMSI or both. This message is intercepted by the ID federation gateway to avoid modifications to the legacy authentication server .

The gateway determines the appropriate identification process as described above with reference to step in . The gateway then sends a response message such as message that indicates the appropriated identification process e.g. in identification URL field . The message is sent to UE where it is received by authentication client .

In some embodiments messages and are exchanged upon powering up UE before message is sent. In some embodiments message is pushed to UE without waiting for request message .

Based on provisioning data and device information authentication client determines which identification process destination to send the request for service either service request message such as message directed to the legacy authentication or request message such as message directed to the ID federation gateway . The legacy authentication server operates in response to message and is not described further herein. To indicate that the sequence associated with message is not followed the arrow representing message is dotted.

In response to message the ID federation gateway sends an identification user interface UI to the client prompting user input such as password or username and password or some other user input for identifying the user. The UI is sent in an identification UI message . As described above the identification UI message includes the UI e.g. as a HTML script for presenting a form in some embodiments and includes the redirect to the federated identity service in other embodiments. The former embodiments include message and represented by dash dot arrows the latter embodiments include messages and represented by dashed arrows instead.

In the former embodiments the ID federation gateway is configured to present a UI to obtain the user inputs for the federated identity service such as service . The message such as identification UI message includes in field a UI that is associated with gateway . The UI may be included in any manner known in the art such as a script in an HTML document delivered via HTTP. The UI in field is directly presented on UE by authentication client . User responses are returned in one or more messages .

In the latter embodiments the ID federation gateway is configured to redirect the user equipment to the federated identity service such as service which provides a UI to obtain user inputs as described above with reference to step in . The message such as identification UI message includes in field a redirect that is associated with gateway . The redirect may be included in any manner known in the art such as URL with one or more parameters. In an illustrated embodiment the parameters redirect the UI response to the gateway . The authentication client is redirected to the federated identity service such as service in message . A UI is sent from the federated identity service to the authentication client in message and presented on UE by authentication client . User inputs are returned to the federated identity service in one or more messages and redirected to the ID federation gateway in message . In some embodiments message includes the identification information results produced by the service such as a failure code or token indicating user credentials.

In response to user inputs received in message or in message when authentication results are not also available in message the ID federation gateway sends data indicating the user responses to the federated identity service such as service as described above with reference to step in . In response to sending message the federated identity service such as service sends identification results in message such as user credential message . In some embodiments message includes an identification result and messages and are omitted.

If the message or includes a valid token e.g. in user credential field then user credentials for the legacy authentication service based on the valid token are sent to the legacy authentication service in message . If the user credentials are deemed valid by the legacy authentication service then the client has gained access to one or more of the services . If not then a failure condition has occurred. The response message from the legacy authentication service indicates the results e.g. in field of identification result message as success or failure code. In some embodiments if the result at the legacy authentication service is a success the message includes the authentication token. Consequently the ID federation gateway is considered a trusted service and service wide authentication context is created. In some embodiments if the result at the legacy authentication service is a success the message includes a URL with parameters that redirects the client to the network resource such as service e.g. in field with any credentials as parameters in the field.

At least some data from results message are included in a message from the ID federation gateway to the authentication client and thence to the client or browser in message . In various embodiments messages are of the form of authentication results message .

Subsequent requests from browser or clients of other services from the same user equipment during the same connection session with the network are not presented with an identification UI because both federated and authentication tokens are already available for this equipment at ID federation gateway .

The processes described herein for providing an ID federation gateway may be advantageously implemented via software hardware e.g. general processor Digital Signal Processing DSP chip an Application Specific Integrated Circuit ASIC Field Programmable Gate Arrays FPGAs etc. firmware or a combination thereof. Such exemplary hardware for performing the described functions is detailed below.

A bus includes one or more parallel conductors of information so that information is transferred quickly among devices coupled to the bus . One or more processors for processing information are coupled with the bus .

A processor performs a set of operations on information as specified by computer program code related to an ID federation gateway. The computer program code is a set of instructions or statements providing instructions for the operation of the processor and or the computer system to perform specified functions. The code for example may be written in a computer programming language that is compiled into a native instruction set of the processor. The code may also be written directly using the native instruction set e.g. machine language . The set of operations include bringing information in from the bus and placing information on the bus . The set of operations also typically include comparing two or more units of information shifting positions of units of information and combining two or more units of information such as by addition or multiplication or logical operations like OR exclusive OR XOR and AND. Each operation of the set of operations that can be performed by the processor is represented to the processor by information called instructions such as an operation code of one or more digits. A sequence of operations to be executed by the processor such as a sequence of operation codes constitute processor instructions also called computer system instructions or simply computer instructions. Processors may be implemented as mechanical electrical magnetic optical chemical or quantum components among others alone or in combination.

Computer system also includes a memory coupled to bus . The memory such as a random access memory RAM or other dynamic storage device stores information including processor instructions for an ID federation gateway. Dynamic memory allows information stored therein to be changed by the computer system . RAM allows a unit of information stored at a location called a memory address to be stored and retrieved independently of information at neighboring addresses. The memory is also used by the processor to store temporary values during execution of processor instructions. The computer system also includes a read only memory ROM or other static storage device coupled to the bus for storing static information including instructions that is not changed by the computer system . Some memory is composed of volatile storage that loses the information stored thereon when power is lost. Also coupled to bus is a non volatile persistent storage device such as a magnetic disk optical disk or flash card for storing information including instructions that persists even when the computer system is turned off or otherwise loses power.

Information including instructions for an ID federation gateway is provided to the bus for use by the processor from an external input device such as a keyboard containing alphanumeric keys operated by a human user or a sensor. A sensor detects conditions in its vicinity and transforms those detections into physical expression compatible with the measurable phenomenon used to represent information in computer system . Other external devices coupled to bus used primarily for interacting with humans include a display device such as a cathode ray tube CRT or a liquid crystal display LCD or plasma screen or printer for presenting text or images and a pointing device such as a mouse or a trackball or cursor direction keys or motion sensor for controlling a position of a small cursor image presented on the display and issuing commands associated with graphical elements presented on the display . In some embodiments for example in embodiments in which the computer system performs all functions automatically without human input one or more of external input device display device and pointing device is omitted.

In the illustrated embodiment special purpose hardware such as an application specific integrated circuit ASIC is coupled to bus . The special purpose hardware is configured to perform operations not performed by processor quickly enough for special purposes. Examples of application specific ICs include graphics accelerator cards for generating images for display cryptographic boards for encrypting and decrypting messages sent over a network speech recognition and interfaces to special external devices such as robotic arms and medical scanning equipment that repeatedly perform some complex sequence of operations that are more efficiently implemented in hardware.

Computer system also includes one or more instances of a communications interface coupled to bus . Communication interface provides a one way or two way communication coupling to a variety of external devices that operate with their own processors such as printers scanners and external disks. In general the coupling is with a network link that is connected to a local network to which a variety of external devices with their own processors are connected. For example communication interface may be a parallel port or a serial port or a universal serial bus USB port on a personal computer. In some embodiments communications interface is an integrated services digital network ISDN card or a digital subscriber line DSL card or a telephone modem that provides an information communication connection to a corresponding type of telephone line. In some embodiments a communication interface is a cable modem that converts signals on bus into signals for a communication connection over a coaxial cable or into optical signals for a communication connection over a fiber optic cable. As another example communications interface may be a local area network LAN card to provide a data communication connection to a compatible LAN such as Ethernet. Wireless links may also be implemented. For wireless links the communications interface sends or receives or both sends and receives electrical acoustic or electromagnetic signals including infrared and optical signals that carry information streams such as digital data. For example in wireless handheld devices such as mobile telephones like cell phones the communications interface includes a radio band electromagnetic transmitter and receiver called a radio transceiver. In certain embodiments the communications interface enables connection to the communication network for an ID federation gateway to the UE .

The term computer readable medium as used herein refers to any medium that participates in providing information to processor including instructions for execution. Such a medium may take many forms including but not limited to computer readable storage medium e.g. non volatile media volatile media and transmission media. Non transitory media such as non volatile media include for example optical or magnetic disks such as storage device . Volatile media include for example dynamic memory . Transmission media include for example coaxial cables copper wire fiber optic cables and carrier waves that travel through space without wires or cables such as acoustic waves and electromagnetic waves including radio optical and infrared waves. Signals include man made transient variations in amplitude frequency phase polarization or other physical properties transmitted through the transmission media. Common forms of computer readable media include for example a floppy disk a flexible disk hard disk magnetic tape any other magnetic medium a CD ROM CDRW DVD any other optical medium punch cards paper tape optical mark sheets any other physical medium with patterns of holes or other optically recognizable indicia a RAM a PROM an EPROM a FLASH EPROM any other memory chip or cartridge a carrier wave or any other medium from which a computer can read. The term computer readable storage medium is used herein to refer to any computer readable medium except transmission media.

Logic encoded in one or more tangible media includes one or both of processor instructions on a computer readable storage media and special purpose hardware such as ASIC .

Network link typically provides information communication using transmission media through one or more networks to other devices that use or process the information. For example network link may provide a connection through local network to a host computer or to equipment operated by an Internet Service Provider ISP . ISP equipment in turn provides data communication services through the public world wide packet switching communication network of networks now commonly referred to as the Internet .

A computer called a server host connected to the Internet hosts a process that provides a service in response to information received over the Internet. For example server host hosts a process that provides information representing video data for presentation at display . It is contemplated that the components of system can be deployed in various configurations within other computer systems e.g. host and server .

At least some embodiments of the invention are related to the use of computer system for implementing some or all of the techniques described herein. According to one embodiment of the invention those techniques are performed by computer system in response to processor executing one or more sequences of one or more processor instructions contained in memory . Such instructions also called computer instructions software and program code may be read into memory from another computer readable medium such as storage device or network link . Execution of the sequences of instructions contained in memory causes processor to perform one or more of the method steps described herein. In alternative embodiments hardware such as ASIC may be used in place of or in combination with software to implement the invention. Thus embodiments of the invention are not limited to any specific combination of hardware and software unless otherwise explicitly stated herein.

The signals transmitted over network link and other networks through communications interface carry information to and from computer system . Computer system can send and receive information including program code through the networks among others through network link and communications interface . In an example using the Internet a server host transmits program code for a particular application requested by a message sent from computer through Internet ISP equipment local network and communications interface . The received code may be executed by processor as it is received or may be stored in memory or in storage device or other non volatile storage for later execution or both. In this manner computer system may obtain application program code in the form of signals on a carrier wave.

Various forms of computer readable media may be involved in carrying one or more sequence of instructions or data or both to processor for execution. For example instructions and data may initially be carried on a magnetic disk of a remote computer such as host . The remote computer loads the instructions and data into its dynamic memory and sends the instructions and data over a telephone line using a modem. A modem local to the computer system receives the instructions and data on a telephone line and uses an infra red transmitter to convert the instructions and data to a signal on an infra red carrier wave serving as the network link . An infrared detector serving as communications interface receives the instructions and data carried in the infrared signal and places information representing the instructions and data onto bus . Bus carries the information to memory from which processor retrieves and executes the instructions using some of the data sent with the instructions. The instructions and data received in memory may optionally be stored on storage device either before or after execution by the processor .

In one embodiment the chip set includes a communication mechanism such as a bus for passing information among the components of the chip set . A processor has connectivity to the bus to execute instructions and process information stored in for example a memory . The processor may include one or more processing cores with each core configured to perform independently. A multi core processor enables multiprocessing within a single physical package. Examples of a multi core processor include two four eight or greater numbers of processing cores. Alternatively or in addition the processor may include one or more microprocessors configured in tandem via the bus to enable independent execution of instructions pipelining and multithreading. The processor may also be accompanied with one or more specialized components to perform certain processing functions and tasks such as one or more digital signal processors DSP or one or more application specific integrated circuits ASIC . A DSP typically is configured to process real world signals e.g. sound in real time independently of the processor . Similarly an ASIC can be configured to performed specialized functions not easily performed by a general purposed processor. Other specialized components to aid in performing the inventive functions described herein include one or more field programmable gate arrays FPGA not shown one or more controllers not shown or one or more other special purpose computer chips.

The processor and accompanying components have connectivity to the memory via the bus . The memory includes both dynamic memory e.g. RAM magnetic disk writable optical disk etc. and static memory e.g. ROM CD ROM etc. for storing executable instructions that when executed perform the inventive steps described herein for an ID federation gateway. The memory also stores the data associated with or generated by the execution of the inventive steps.

Pertinent internal components of the telephone include a Main Control Unit MCU a Digital Signal Processor DSP and a receiver transmitter unit including a microphone gain control unit and a speaker gain control unit. A main display unit provides a display to the user in support of various applications and mobile terminal functions that perform or support the steps of an ID federation gateway. The display includes display circuitry configured to display at least a portion of a user interface of the mobile terminal e.g. mobile telephone . Additionally the display and display circuitry are configured to facilitate user control of at least some functions of the mobile terminal. An audio function circuitry includes a microphone and microphone amplifier that amplifies the speech signal output from the microphone . The amplified speech signal output from the microphone is fed to a coder decoder CODEC .

A radio section amplifies power and converts frequency in order to communicate with a base station which is included in a mobile communication system via antenna . The power amplifier PA and the transmitter modulation circuitry are operationally responsive to the MCU with an output from the PA coupled to the duplexer or circulator or antenna switch as known in the art. The PA also couples to a battery interface and power control unit .

In use a user of mobile terminal speaks into the microphone and his or her voice along with any detected background noise is converted into an analog voltage. The analog voltage is then converted into a digital signal through the Analog to Digital Converter ADC . The control unit routes the digital signal into the DSP for processing therein such as speech encoding channel encoding encrypting and interleaving. In one embodiment the processed voice signals are encoded by units not separately shown using a cellular transmission protocol such as global evolution EDGE general packet radio service GPRS global system for mobile communications GSM Internet protocol multimedia subsystem IMS universal mobile telecommunications system UMTS etc. as well as any other suitable wireless medium e.g. microwave access WiMAX Long Term Evolution LTE networks code division multiple access CDMA wideband code division multiple access WCDMA wireless fidelity WiFi satellite and the like.

The encoded signals are then routed to an equalizer for compensation of any frequency dependent impairments that occur during transmission though the air such as phase and amplitude distortion. After equalizing the bit stream the modulator combines the signal with a RF signal generated in the RF interface . The modulator generates a sine wave by way of frequency or phase modulation. In order to prepare the signal for transmission an up converter combines the sine wave output from the modulator with another sine wave generated by a synthesizer to achieve the desired frequency of transmission. The signal is then sent through a PA to increase the signal to an appropriate power level. In practical systems the PA acts as a variable gain amplifier whose gain is controlled by the DSP from information received from a network base station. The signal is then filtered within the duplexer and optionally sent to an antenna coupler to match impedances to provide maximum power transfer. Finally the signal is transmitted via antenna to a local base station. An automatic gain control AGC can be supplied to control the gain of the final stages of the receiver. The signals may be forwarded from there to a remote telephone which may be another cellular telephone other mobile phone or a land line connected to a Public Switched Telephone Network PSTN or other telephony networks.

Voice signals transmitted to the mobile terminal are received via antenna and immediately amplified by a low noise amplifier LNA . A down converter lowers the carrier frequency while the demodulator strips away the RF leaving only a digital bit stream. The signal then goes through the equalizer and is processed by the DSP . A Digital to Analog Converter DAC converts the signal and the resulting output is transmitted to the user through the speaker all under control of a Main Control Unit MCU which can be implemented as a Central Processing Unit CPU not shown .

The MCU receives various signals including input signals from the keyboard . The keyboard and or the MCU in combination with other user input components e.g. the microphone comprise a user interface circuitry for managing user input. The MCU runs user interface software to facilitate user control of at least some functions of the mobile terminal for an ID federation gateway. The MCU also delivers a display command and a switch command to the display and to the speech output switching controller respectively. Further the MCU exchanges information with the DSP and can access an optionally incorporated SIM card and a memory . In addition the MCU executes various control functions required of the terminal. The DSP may depending upon the implementation perform any of a variety of conventional digital processing functions on the voice signals. Additionally DSP determines the background noise level of the local environment from the signals detected by microphone and sets the gain of microphone to a level selected to compensate for the natural tendency of the user of the mobile terminal .

The CODEC includes the ADC and DAC . The memory stores various data including call incoming tone data and is capable of storing other data including music data received via e.g. the global Internet. The software module could reside in RAM memory flash memory registers or any other form of writable storage medium known in the art. The memory device may be but not limited to a single memory CD DVD ROM RAM EEPROM optical storage or any other non volatile storage medium capable of storing digital data.

An optionally incorporated SIM card carries for instance important information such as the cellular phone number the carrier supplying service subscription details and security information. The SIM card serves primarily to identify the mobile terminal on a radio network. The card also contains a memory for storing a personal telephone number registry text messages and user specific mobile terminal settings.

While the invention has been described in connection with a number of embodiments and implementations the invention is not so limited but covers various obvious modifications and equivalent arrangements which fall within the purview of the appended claims. Although features of the invention are expressed in certain combinations among the claims it is contemplated that these features can be arranged in any combination and order.

